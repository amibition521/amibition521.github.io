<!doctype html>




<html class="theme-next pisces" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  
    
      
    

    
  

  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Lobster Two:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="排序[TOC] Bubble Sort 冒泡排序定义：重复比较数组中相邻的元素，如果前一个元素比后一个元素大，则交换他们的位置，如此重复，直到将最大的元素放到最后；重复上述步骤，每一次都将前面未排序的最大元素已经放到最后； 助记码： 123i∈[0,N-1)               //循环N-1遍  j∈[0,N-1-i)           //每遍循环要处理的无序部分    swap(j">
<meta name="keywords">
<meta property="og:type" content="article">
<meta property="og:title" content="排序算法">
<meta property="og:url" content="http://yoursite.com/2018/06/19/排序算法/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="排序[TOC] Bubble Sort 冒泡排序定义：重复比较数组中相邻的元素，如果前一个元素比后一个元素大，则交换他们的位置，如此重复，直到将最大的元素放到最后；重复上述步骤，每一次都将前面未排序的最大元素已经放到最后； 助记码： 123i∈[0,N-1)               //循环N-1遍  j∈[0,N-1-i)           //每遍循环要处理的无序部分    swap(j">
<meta property="og:image" content="https://wikimedia.org/api/rest_v1/media/math/render/svg/6cd9594a16cb898b8f2a2dff9227a385ec183392">
<meta property="og:image" content="http://images2015.cnblogs.com/blog/936002/201604/936002-20160419200543054-1710853388.png">
<meta property="og:updated_time" content="2018-06-21T08:29:00.574Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="排序算法">
<meta name="twitter:description" content="排序[TOC] Bubble Sort 冒泡排序定义：重复比较数组中相邻的元素，如果前一个元素比后一个元素大，则交换他们的位置，如此重复，直到将最大的元素放到最后；重复上述步骤，每一次都将前面未排序的最大元素已经放到最后； 助记码： 123i∈[0,N-1)               //循环N-1遍  j∈[0,N-1-i)           //每遍循环要处理的无序部分    swap(j">
<meta name="twitter:image" content="https://wikimedia.org/api/rest_v1/media/math/render/svg/6cd9594a16cb898b8f2a2dff9227a385ec183392">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: false,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/06/19/排序算法/"/>





  <title> 排序算法 | Hexo </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hexo</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/19/排序算法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="喝咖啡的鱼儿">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                排序算法
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-06-19T16:25:42+08:00">
                2018-06-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h2><p>[TOC]</p>
<h3 id="Bubble-Sort-冒泡排序"><a href="#Bubble-Sort-冒泡排序" class="headerlink" title="Bubble Sort 冒泡排序"></a>Bubble Sort 冒泡排序</h3><p>定义：重复比较数组中相邻的元素，如果前一个元素比后一个元素大，则交换他们的位置，如此重复，直到将最大的元素放到最后；重复上述步骤，每一次都将前面未排序的最大元素已经放到最后；</p>
<p>助记码：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">i∈[<span class="number">0</span>,N<span class="number">-1</span>)               <span class="comment">//循环N-1遍</span></div><div class="line">  j∈[<span class="number">0</span>,N<span class="number">-1</span>-i)           <span class="comment">//每遍循环要处理的无序部分</span></div><div class="line">    swap(j,j+<span class="number">1</span>)          <span class="comment">//两两排序（升序/降序）</span></div></pre></td></tr></table></figure>
<p>代码实现：</p>
<p>JAVA：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">bubble_sort</span><span class="params">(<span class="keyword">int</span> arr[], <span class="keyword">int</span> len)</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> i, j, temp;</div><div class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; len - <span class="number">1</span>; i++)</div><div class="line">		<span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; len - <span class="number">1</span> - i; j++)</div><div class="line">			<span class="keyword">if</span> (arr[j] &gt; arr[j + <span class="number">1</span>]) &#123;</div><div class="line">				temp = arr[j];</div><div class="line">				arr[j] = arr[j + <span class="number">1</span>];</div><div class="line">				arr[j + <span class="number">1</span>] = temp;</div><div class="line">			&#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//优化一</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">bubbleSort</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> i, temp, len = arr.length;</div><div class="line">    <span class="keyword">boolean</span> changed;</div><div class="line">    <span class="keyword">do</span> &#123;</div><div class="line">      changed = <span class="keyword">false</span>;</div><div class="line">      len -= <span class="number">1</span>;</div><div class="line">      <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; len; i++) &#123;</div><div class="line">        <span class="keyword">if</span> (arr[i] &gt; arr[i + <span class="number">1</span>]) &#123;</div><div class="line">          temp = arr[i];</div><div class="line">          arr[i] = arr[i + <span class="number">1</span>];</div><div class="line">          arr[i + <span class="number">1</span>] = temp;</div><div class="line">          changed = <span class="keyword">true</span>;</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">     <span class="comment">// 优化, 每一趟Bubble Sort都将最大的元素放在了最后的位置</span></div><div class="line">     <span class="comment">// 所以下一次排序, 最后的元素可以不再考虑</span></div><div class="line">     len --;</div><div class="line">    &#125; <span class="keyword">while</span> (changed);</div><div class="line">  &#125;</div><div class="line"><span class="comment">//优化二：</span></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">bubbleSort2</span><span class="params">(Comparable[] arr)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> n = arr.length;</div><div class="line">        <span class="keyword">int</span> newn;</div><div class="line">        <span class="keyword">do</span> &#123;</div><div class="line">            newn = <span class="number">0</span>;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++)</div><div class="line">                <span class="keyword">if</span> (arr[i - <span class="number">1</span>].compareTo(arr[i]) &gt; <span class="number">0</span>) &#123;</div><div class="line">                    swap(arr, i - <span class="number">1</span>, i);</div><div class="line">                    <span class="comment">// 记录最后一次的交换位置,在此之后的元素在下一轮扫描中均不考虑</span></div><div class="line">                    newn = i;</div><div class="line">                &#125;</div><div class="line">            n = newn;</div><div class="line">        &#125; <span class="keyword">while</span> (newn &gt; <span class="number">0</span>);</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>Python:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">bubble_sorted</span><span class="params">(iterable)</span>:</span></div><div class="line">    new_list = list(iterable)</div><div class="line">    list_len = len(new_list)</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(list_len - <span class="number">1</span>):</div><div class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(list_len - <span class="number">1</span>, i, <span class="number">-1</span>):</div><div class="line">            <span class="keyword">if</span> new_list[j] &lt; new_list[j - <span class="number">1</span>]:</div><div class="line">                new_list[j], new_list[j - <span class="number">1</span>] = new_list[j - <span class="number">1</span>], new_list[j]</div><div class="line">    <span class="keyword">return</span> new_list</div></pre></td></tr></table></figure>
<p>时间复杂度：（{\displaystyle O(n^{2})}<img src="https://wikimedia.org/api/rest_v1/media/math/render/svg/6cd9594a16cb898b8f2a2dff9227a385ec183392" alt="O(n^{2})">）</p>
<p>我的理解：比较的次数越多，说明未排序的元素越少，所以第一次比较，比较的元素最多，交换的次数也是最多；当比较了 <code>n - 2</code> 次之后，只有最前面的元素没有排序，很显然这时已经完成排序操作啦。</p>
<h3 id="Select-Sort-选择排序"><a href="#Select-Sort-选择排序" class="headerlink" title="Select Sort 选择排序"></a>Select Sort 选择排序</h3><p>定义：找出数组中最小的元素，将它和数组的第一个元素交换位置，再次，在剩下的元素中找到最小的元素，将它和数组的第二个元素交换位置。</p>
<p>公共方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">less</span><span class="params">(Comparable v, Comparable w)</span> </span>&#123;</div><div class="line">   <span class="keyword">return</span> (v.compareTo(w) &lt; <span class="number">0</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">exch</span><span class="params">(Comparable[] a, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</div><div class="line">   Comparable swap = a[i];</div><div class="line">   a[i] = a[j];</div><div class="line">   a[j] = swap;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>代码实现：</p>
<p>JAVA 实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> N = a.length;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</div><div class="line">        <span class="keyword">int</span> min = i; <span class="comment">//最小元素的索引</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = i+<span class="number">1</span>; j &lt; N; j++) &#123;</div><div class="line">            <span class="comment">//将 a[i] 和 a[i+1 .. N] 中最小的元素进行比较</span></div><div class="line">            <span class="keyword">if</span> (less(a[j], a[min])) &#123;</div><div class="line">                min = j;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">         exch(a, i, min);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Python 实现：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">selection_sort</span><span class="params">(L)</span>:</span></div><div class="line">    N = len(L)</div><div class="line">    exchanges_count = <span class="number">0</span></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(N<span class="number">-1</span>):</div><div class="line">        min_index = i</div><div class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(i+<span class="number">1</span>, N):</div><div class="line">            <span class="keyword">if</span> L[min_index] &gt; L[j]:</div><div class="line">                min_index = j</div><div class="line">        <span class="keyword">if</span> min_index != i:</div><div class="line">            L[min_index], L[i] = L[i], L[min_index]</div><div class="line">        exchanges_count += <span class="number">1</span></div><div class="line">        print(<span class="string">'iteration #&#123;&#125;: &#123;&#125;'</span>.format(i, L))</div><div class="line">    print(<span class="string">'Total &#123;&#125; swappings'</span>.format(exchanges_count))</div><div class="line">    <span class="keyword">return</span> L</div><div class="line"></div><div class="line">testlist = [<span class="number">17</span>, <span class="number">23</span>, <span class="number">20</span>, <span class="number">14</span>, <span class="number">12</span>, <span class="number">25</span>, <span class="number">1</span>, <span class="number">20</span>, <span class="number">81</span>, <span class="number">14</span>, <span class="number">11</span>, <span class="number">12</span>]</div><div class="line">print(<span class="string">'Before selection sort: &#123;&#125;'</span>.format(testlist))</div><div class="line">print(<span class="string">'After selection sort:  &#123;&#125;'</span>.format(selection_sort(testlist)))</div></pre></td></tr></table></figure>
<p>自己的理解：</p>
<ul>
<li>在数组中找到最小的元素，如何实现呢？ 将数组中的元素两两进行比较，确定最小元素的索引；</li>
<li>将最小的元素放到数组的起始位置；如何实现呢？ 将最小元素的索引与第一个元素进行交换；</li>
<li>重复上述步骤；</li>
</ul>
<h3 id="Insert-Sort-插入排序"><a href="#Insert-Sort-插入排序" class="headerlink" title="Insert Sort 插入排序"></a>Insert Sort 插入排序</h3><p>定义：通过构建有序序列，对于未排序数据，在已排序序列中从后向前扫描，找到相应位置并插入。</p>
<p>具体算法描述如下：</p>
<ol>
<li>从第一个元素开始，该元素可以认为已经被排序</li>
<li>取出下一个元素，在已经排序的元素序列中从后向前扫描</li>
<li>如果该元素（已排序）大于新元素，将该元素移到下一位置</li>
<li>重复步骤3，直到找到已排序的元素小于或者等于新元素的位置</li>
<li>将新元素插入到该位置后</li>
<li>重复步骤2~5</li>
</ol>
<p>代码实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">InsertSort</span><span class="params">(Comparable[] a)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> N = a.length;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; N; i++) &#123;</div><div class="line">        <span class="comment">//将 a[i] 插入到 a[i -1]、a[i - 2]、a[i - 3]... 之中</span></div><div class="line">        <span class="comment">//寻找元素 a[i] 合适的插入位置</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &gt; <span class="number">0</span> &amp;&amp; less(a[j], a[j - <span class="number">1</span>]); j--) &#123;</div><div class="line">            exch(a, j, j - <span class="number">1</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>实战写法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//优化</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] arr)</span></span>&#123;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> n = arr.length;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</div><div class="line"></div><div class="line">            <span class="comment">// 寻找元素arr[i]合适的插入位置</span></div><div class="line"></div><div class="line">            <span class="comment">// 写法1</span></div><div class="line"><span class="comment">//            for( int j = i ; j &gt; 0 ; j -- )</span></div><div class="line"><span class="comment">//                if( arr[j].compareTo( arr[j-1] ) &lt; 0 )</span></div><div class="line"><span class="comment">//                    swap( arr, j , j-1 );</span></div><div class="line"><span class="comment">//                else</span></div><div class="line"><span class="comment">//                    break;</span></div><div class="line"></div><div class="line">            <span class="comment">// 写法2</span></div><div class="line"><span class="comment">//            for( int j = i; j &gt; 0 &amp;&amp; arr[j].compareTo(arr[j-1]) &lt; 0 ; j--)</span></div><div class="line"><span class="comment">//                swap(arr, j, j-1);</span></div><div class="line"></div><div class="line">            <span class="comment">// 写法3</span></div><div class="line">            Comparable e = arr[i];</div><div class="line">            <span class="keyword">int</span> j = i;</div><div class="line">            <span class="keyword">for</span>( ; j &gt; <span class="number">0</span> &amp;&amp; arr[j-<span class="number">1</span>].compareTo(e) &gt; <span class="number">0</span> ; j--)</div><div class="line">                arr[j] = arr[j-<span class="number">1</span>];</div><div class="line">            arr[j] = e;</div><div class="line"></div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>WIKI 写法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertionSort</span><span class="params">(<span class="keyword">int</span>[] array)</span> </span>&#123;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; array.length; i++) &#123;</div><div class="line">			<span class="keyword">int</span> key = array[i];</div><div class="line">			<span class="keyword">int</span> j = i - <span class="number">1</span>;</div><div class="line">			<span class="keyword">while</span> (j &gt;= <span class="number">0</span> &amp;&amp; array[j] &gt; key) &#123;</div><div class="line">				array[j + <span class="number">1</span>] = array[j];</div><div class="line">				j--;</div><div class="line">			&#125;</div><div class="line">			array[j + <span class="number">1</span>] = key;</div><div class="line">		&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//将arr[i] 插入到arr[0]...arr[i - 1]中</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">insertion_sort</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; arr.length; i++ ) &#123;</div><div class="line">			<span class="keyword">int</span> temp = arr[i];</div><div class="line">			<span class="keyword">int</span> j = i - <span class="number">1</span>;  </div><div class="line">    <span class="comment">//如果将赋值放到下一行的for循环内, 会导致在第10行出现j未声明的错误</span></div><div class="line">			<span class="keyword">for</span> (; j &gt;= <span class="number">0</span> &amp;&amp; arr[j] &gt; temp; j-- ) &#123;</div><div class="line">				arr[j + <span class="number">1</span>] = arr[j];</div><div class="line">			&#125;</div><div class="line">			arr[j + <span class="number">1</span>] = temp;</div><div class="line">		&#125;</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<p>算法的痛点：在遍历的同时也在执行交换操作。 </p>
<p>改进：提前终止内层循环。针对近乎有序的数组，排序效率更高。</p>
<p>算法改进：</p>
<ul>
<li><p>利用多次交换相邻元素减少元素的赋值操作</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertSort</span><span class="params">(T arr[], <span class="keyword">int</span> N)</span> </span>&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; N; i++) &#123;</div><div class="line">        T e = arr[i];</div><div class="line">        <span class="keyword">int</span> j;<span class="comment">// j 保存元素 e 应该插入的位置</span></div><div class="line">        <span class="keyword">for</span> (j = i; j &gt; <span class="number">0</span> &amp;&amp; arr[j - <span class="number">1</span>] &gt; e; j--) &#123;</div><div class="line">            arr[j] = arr[j - <span class="number">1</span>];</div><div class="line">        &#125;</div><div class="line">        arr[j] = e;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertSort</span><span class="params">(T arr[], <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = l + <span class="number">1</span>; i &lt;= r; i++) &#123;</div><div class="line">        T e = arr[i];</div><div class="line">        <span class="keyword">int</span> j;</div><div class="line">        <span class="keyword">for</span>(j = i; j &gt; l &amp;&amp; arr[j - <span class="number">1</span>] &gt; e; j--) &#123;</div><div class="line">            arr[j] = arr[j - <span class="number">1</span>];</div><div class="line">        &#125;</div><div class="line">        arr[j] = e;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p><code>InsertX</code>  先将大元素移动到最后，减少交换的元素。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line">  * Rearranges the array in ascending order, using the natural order.</div><div class="line">  * <span class="doctag">@param</span> a the array to be sorted</div><div class="line">  */</div><div class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a)</span> </span>&#123;</div><div class="line">     <span class="keyword">int</span> n = a.length;</div><div class="line">  </div><div class="line">     <span class="comment">// put smallest element in position to serve as sentinel</span></div><div class="line">     <span class="keyword">int</span> exchanges = <span class="number">0</span>;</div><div class="line">     <span class="keyword">for</span> (<span class="keyword">int</span> i = n-<span class="number">1</span>; i &gt; <span class="number">0</span>; i--) &#123;</div><div class="line">         <span class="keyword">if</span> (less(a[i], a[i-<span class="number">1</span>])) &#123;</div><div class="line">             exch(a, i, i-<span class="number">1</span>);</div><div class="line">             exchanges++;</div><div class="line">         &#125;</div><div class="line">     &#125;</div><div class="line">     <span class="keyword">if</span> (exchanges == <span class="number">0</span>) <span class="keyword">return</span>;</div><div class="line">  </div><div class="line">  </div><div class="line">     <span class="comment">// insertion sort with half-exchanges</span></div><div class="line">     <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt; n; i++) &#123;</div><div class="line">         Comparable v = a[i];</div><div class="line">         <span class="keyword">int</span> j = i;</div><div class="line">         <span class="keyword">while</span> (less(v, a[j-<span class="number">1</span>])) &#123;</div><div class="line">             a[j] = a[j-<span class="number">1</span>];</div><div class="line">             j--;</div><div class="line">         &#125;</div><div class="line">         a[j] = v;</div><div class="line">     &#125;</div><div class="line">  </div><div class="line">     <span class="function"><span class="keyword">assert</span> <span class="title">isSorted</span><span class="params">(a)</span></span>;</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
</li>
<li><p><code>BinaryInsertion</code>  二分插入</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BinaryInsertion</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">// This class should not be instantiated.</span></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="title">BinaryInsertion</span><span class="params">()</span> </span>&#123; &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Rearranges the array in ascending order, using the natural order.</div><div class="line">     * <span class="doctag">@param</span> a the array to be sorted</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> n = a.length;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</div><div class="line"></div><div class="line">            <span class="comment">// binary search to determine index j at which to insert a[i]</span></div><div class="line">            Comparable v = a[i];</div><div class="line">            <span class="keyword">int</span> lo = <span class="number">0</span>, hi = i;</div><div class="line">            <span class="keyword">while</span> (lo &lt; hi) &#123;</div><div class="line">                <span class="keyword">int</span> mid = lo + (hi - lo) / <span class="number">2</span>; </div><div class="line">                <span class="keyword">if</span> (less(v, a[mid])) hi = mid;</div><div class="line">                <span class="keyword">else</span>                 lo = mid + <span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="comment">// insetion sort with "half exchanges"</span></div><div class="line">            <span class="comment">// (insert a[i] at index j and shift a[j], ..., a[i-1] to right)</span></div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &gt; lo; --j)</div><div class="line">                a[j] = a[j-<span class="number">1</span>];</div><div class="line">            a[lo] = v;</div><div class="line">        &#125;</div><div class="line">        <span class="function"><span class="keyword">assert</span> <span class="title">isSorted</span><span class="params">(a)</span></span>;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>我的理解：在已知序列中从后向前扫描，对于未知元素找到合适的位置插入，同时将已知序列的元素向后移动一位。</p>
</li>
</ul>
<h3 id="Shell-Sort-希尔排序"><a href="#Shell-Sort-希尔排序" class="headerlink" title="Shell Sort 希尔排序"></a>Shell Sort 希尔排序</h3><p>定义：使数组中任意间隔为 h 的元素都是有序的。</p>
<p>希尔排序是对插入排序的改进；插入元素是相邻元素进行移动，希尔排序是交换不相邻元素以对数组的局部进行排序，并最终利用插入排序将局部有序的数组进行排序。</p>
<p>代码实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line">     * Rearranges the array in ascending order, using the natural order.</div><div class="line">     * <span class="doctag">@param</span> a the array to be sorted</div><div class="line">     */</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> n = a.length;</div><div class="line"></div><div class="line">    <span class="comment">// 3x+1 increment sequence:  1, 4, 13, 40, 121, 364, 1093, ... </span></div><div class="line">    <span class="keyword">int</span> h = <span class="number">1</span>;</div><div class="line">    <span class="keyword">while</span> (h &lt; n/<span class="number">3</span>) h = <span class="number">3</span>*h + <span class="number">1</span>; </div><div class="line"></div><div class="line">    <span class="keyword">while</span> (h &gt;= <span class="number">1</span>) &#123;</div><div class="line">        <span class="comment">// h-sort the array</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = h; i &lt; n; i++) &#123;</div><div class="line">            <span class="comment">//将 a[i] 插入到 a[i - h], a[i - 2 * h] ... 之中</span></div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &gt;= h &amp;&amp; less(a[j], a[j-h]); j -= h) &#123;</div><div class="line">                exch(a, j, j-h);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="function"><span class="keyword">assert</span> <span class="title">isHsorted</span><span class="params">(a, h)</span></span>; </div><div class="line">        h /= <span class="number">3</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">assert</span> <span class="title">isSorted</span><span class="params">(a)</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>WIKI 实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">shellSort</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> gap = <span class="number">1</span>, i, j, len = arr.length;</div><div class="line">	<span class="keyword">int</span> temp;</div><div class="line">	<span class="keyword">while</span> (gap &lt; len / <span class="number">3</span>)</div><div class="line">		gap = gap * <span class="number">3</span> + <span class="number">1</span>; <span class="comment">// &lt;O(n^(3/2)) by Knuth,1973&gt;: 1, 4, 13, 40, 121, ...</span></div><div class="line">	<span class="keyword">for</span> (; gap &gt; <span class="number">0</span>; gap /= <span class="number">3</span>)</div><div class="line">		<span class="keyword">for</span> (i = gap; i &lt; len; i++) &#123;</div><div class="line">			temp = arr[i];</div><div class="line">			<span class="keyword">for</span> (j = i - gap; j &gt;= <span class="number">0</span> &amp;&amp; arr[j] &gt; temp; j -= gap)</div><div class="line">				arr[j + gap] = arr[j];</div><div class="line">			arr[j + gap] = temp;</div><div class="line">		&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p> 优化：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] arr)</span></span>&#123;</div><div class="line"></div><div class="line">     <span class="keyword">int</span> n = arr.length;</div><div class="line"></div><div class="line">     <span class="comment">// 计算 increment sequence: 1, 4, 13, 40, 121, 364, 1093...</span></div><div class="line">     <span class="keyword">int</span> h = <span class="number">1</span>;</div><div class="line">     <span class="keyword">while</span> (h &lt; n/<span class="number">3</span>) h = <span class="number">3</span>*h + <span class="number">1</span>;</div><div class="line"></div><div class="line">     <span class="keyword">while</span> (h &gt;= <span class="number">1</span>) &#123;</div><div class="line"></div><div class="line">         <span class="comment">// h-sort the array</span></div><div class="line">         <span class="keyword">for</span> (<span class="keyword">int</span> i = h; i &lt; n; i++) &#123;</div><div class="line"></div><div class="line">             <span class="comment">// 对 arr[i], arr[i-h], arr[i-2*h], arr[i-3*h]... 使用插入排序</span></div><div class="line">             Comparable e = arr[i];</div><div class="line">             <span class="keyword">int</span> j = i;</div><div class="line">             <span class="keyword">for</span> ( ; j &gt;= h &amp;&amp; e.compareTo(arr[j-h]) &lt; <span class="number">0</span> ; j -= h)</div><div class="line">                 arr[j] = arr[j-h];</div><div class="line">             arr[j] = e;</div><div class="line">         &#125;</div><div class="line"></div><div class="line">         h /= <span class="number">3</span>;</div><div class="line">     &#125;</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<p>我的理解：将数组分为步长为 h 的序列，分别对他们进行插入排序；同时不断降低 步长 h 的幅度，在对数组进行插入排序，最后进行到步长为 1 时，说明数组已经排好序啦。</p>
<h3 id="Merge-Sort-归并排序"><a href="#Merge-Sort-归并排序" class="headerlink" title="Merge Sort  归并排序"></a>Merge Sort  归并排序</h3><p>定义：先递归的将数组分成两半分别排序，然后将结果归并起来。体现的是 “分治” 的思想。</p>
<p>思想：指的是将两个已经排序的序列合并成一个序列的操作；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Merge Sort是我们学习的第一个O(nlogn)复杂度的算法</span></div><div class="line"><span class="comment">// 可以在1秒之内轻松处理100万数量级的数据</span></div><div class="line"><span class="comment">// 注意：不要轻易尝试使用SelectionSort, InsertionSort或者BubbleSort处理100万级的数据</span></div><div class="line"><span class="comment">// 否则，你就见识了O(n^2)的算法和O(nlogn)算法的本质差异：）</span></div></pre></td></tr></table></figure>
<p><strong>递归法（Top-down）</strong></p>
<ol>
<li>申请空间，使其大小为两个已经排序序列之和，该空间用来存放合并后的序列</li>
<li>设定两个指针，最初位置分别为两个已经排序序列的起始位置</li>
<li>比较两个指针所指向的元素，选择相对小的元素放入到合并空间，并移动指针到下一位置</li>
<li>重复步骤3直到某一指针到达序列尾</li>
<li>将另一序列剩下的所有元素直接复制到合并序列尾</li>
</ol>
<p><strong>迭代法（Bottom-up）</strong><br>原理如下（假设序列共有 { n} n个元素）：</p>
<ol>
<li>将序列每相邻两个数字进行归并操作，形成 ceil(n/2) 个序列，排序后每个序列包含两/一个元素</li>
<li>若此时序列数不是1个则将上述序列再次归并，形成  ceil(n/4)个序列，每个序列包含四/三个元素</li>
<li>重复步骤2，直到所有元素排序完毕，即序列数为1</li>
</ol>
<p>代码实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//递归的调用</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mergeSort</span><span class="params">(T arr[], <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (l &gt;= r) <span class="keyword">return</span>;</div><div class="line">    <span class="comment">//针对较少的数组元素进行插入排序</span></div><div class="line">    <span class="comment">//if (r -l &gt;= 15) &#123;</span></div><div class="line">      <span class="comment">//  insertSort(arr, l, r);</span></div><div class="line">        <span class="comment">//return;</span></div><div class="line">    <span class="comment">//&#125;</span></div><div class="line">    <span class="keyword">int</span> mid = l + (r - l)/ <span class="number">2</span>;</div><div class="line">    mergeSort(arr, l, mid);</div><div class="line">    mergeSort(arr, mid+<span class="number">1</span>, r);</div><div class="line">    <span class="comment">//如果要排序的数组是近乎有序的话，加上下面的判断</span></div><div class="line">    <span class="comment">//if (arr[mid] &gt; arr[mid +a]) &#123;&#125;</span></div><div class="line">    merge(arr, l, mid, r);</div><div class="line">&#125;</div><div class="line"><span class="comment">//将 arr[l..mid] 和 arr[mid+1 ... r] 两部分进行归并</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">merge</span><span class="params">(T arr[], <span class="keyword">int</span> l, <span class="keyword">int</span> mid, <span class="keyword">int</span> r)</span> </span>&#123;</div><div class="line">    T aux[r - l + <span class="number">1</span>];</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = l; i &lt;= r; i++) &#123;</div><div class="line">        aux[i - l] = arr[i];</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 初始化，i指向左半部分的起始索引位置l；j指向右半部分起始索引位置mid+1</span></div><div class="line">    <span class="keyword">int</span> i = l, j = mid + <span class="number">1</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k = l; k &lt;= r; k++) &#123;</div><div class="line">        <span class="keyword">if</span> (i &gt; mid) &#123;<span class="comment">// 如果左半部分元素已经全部处理完毕</span></div><div class="line">            arr[k] = aux[j - l];</div><div class="line">            j++;</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (j &gt; r) &#123;<span class="comment">// 如果右半部分元素已经全部处理完毕</span></div><div class="line">            arr[k] = aux[i - l];</div><div class="line">            i++;</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (aux[i - l] &lt; aux[j - l]) &#123;<span class="comment">// 左半部分所指元素 &lt; 右半部分所指元素</span></div><div class="line">            arr[k] = aux[i - l];</div><div class="line">            i++;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;<span class="comment">// 左半部分所指元素 &gt;= 右半部分所指元素</span></div><div class="line">            arr[k] = aux[j - l];</div><div class="line">            j++;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>归并排序算法的几种优化：</p>
<ul>
<li><p>原地归并    </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// stably merge a[lo .. mid] with a[mid+1 ..hi] using aux[lo .. hi]</span></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">merge</span><span class="params">(Comparable[] a, Comparable[] aux, <span class="keyword">int</span> lo, <span class="keyword">int</span> mid, <span class="keyword">int</span> hi)</span> </span>&#123;</div><div class="line">    <span class="comment">// precondition: a[lo .. mid] and a[mid+1 .. hi] are sorted subarrays</span></div><div class="line">    <span class="function"><span class="keyword">assert</span> <span class="title">isSorted</span><span class="params">(a, lo, mid)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">assert</span> <span class="title">isSorted</span><span class="params">(a, mid+<span class="number">1</span>, hi)</span></span>;</div><div class="line">  </div><div class="line">    <span class="comment">// copy to aux[]</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k = lo; k &lt;= hi; k++) &#123;</div><div class="line">        aux[k] = a[k]; </div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="comment">// merge back to a[]</span></div><div class="line">    <span class="keyword">int</span> i = lo, j = mid+<span class="number">1</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k = lo; k &lt;= hi; k++) &#123;</div><div class="line">        <span class="keyword">if</span>      (i &gt; mid)              a[k] = aux[j++];</div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (j &gt; hi)               a[k] = aux[i++];</div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (less(aux[j], aux[i])) a[k] = aux[j++];</div><div class="line">        <span class="keyword">else</span>                           a[k] = aux[i++];</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="comment">// postcondition: a[lo .. hi] is sorted</span></div><div class="line">    <span class="function"><span class="keyword">assert</span> <span class="title">isSorted</span><span class="params">(a, lo, hi)</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>自顶向下的归并排序</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// mergesort a[lo..hi] using auxiliary array aux[lo..hi]</span></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a, Comparable[] aux, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (hi &lt;= lo) <span class="keyword">return</span>;</div><div class="line">    <span class="keyword">int</span> mid = lo + (hi - lo) / <span class="number">2</span>;</div><div class="line">    sort(a, aux, lo, mid);</div><div class="line">    sort(a, aux, mid + <span class="number">1</span>, hi);</div><div class="line">    merge(a, aux, lo, mid, hi);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>自底向上的归并排序: 以2个元素为最小单位，依次递增到全部元素的一半结束；<strong>可以针对链表进行排序</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//迭代</span></div><div class="line"><span class="comment">/**</span></div><div class="line">     * Rearranges the array in ascending order, using the natural order.</div><div class="line">     * <span class="doctag">@param</span> a the array to be sorted</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> n = a.length;</div><div class="line">        Comparable[] aux = <span class="keyword">new</span> Comparable[n];</div><div class="line">        <span class="comment">//遍历元素</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> len = <span class="number">1</span>; len &lt; n; len *= <span class="number">2</span>) &#123;</div><div class="line">            <span class="comment">//要归并的元素的起始位置</span></div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> lo = <span class="number">0</span>; lo &lt; n-len; lo += len+len) &#123;</div><div class="line">                <span class="keyword">int</span> mid  = lo+len-<span class="number">1</span>;</div><div class="line">                <span class="keyword">int</span> hi = Math.min(lo+len+len-<span class="number">1</span>, n-<span class="number">1</span>);</div><div class="line"></div><div class="line">                merge(a, aux, lo, mid, hi);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="function"><span class="keyword">assert</span> <span class="title">isSorted</span><span class="params">(a)</span></span>;</div><div class="line">    &#125;</div><div class="line"><span class="comment">//改良版（同上）</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mergeSortBU</span><span class="params">(T arr[], <span class="keyword">int</span> n)</span> </span>&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> sz = <span class="number">1</span>; sz &lt;= n; sz += sz) &#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i + sz &lt; n; i += sz + sz) &#123;</div><div class="line">             <span class="comment">//对 arr[i ... i + len - 1] 和 arr[i + len ... i + 2 * len - 1]进行归并</span></div><div class="line">             merge(arr, i, i + sz - <span class="number">1</span>, Math.min(i + sz + sz -<span class="number">1</span>, n - <span class="number">1</span>));</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>我的理解：归并排序的思想是将数组复制一份，将复制出来的数组分为两半，将前后两部分中每一个元素进行比较，将较小的元素放到原数组中。</p>
<h3 id="Quick-Sort-快速排序"><a href="#Quick-Sort-快速排序" class="headerlink" title="Quick Sort 快速排序"></a>Quick Sort 快速排序</h3><p>定义：首先找到 “切分” 元素，将数组分为两部分，将左右两部分分别排序，当两个数组都是有序时整个数组就是有序的。</p>
<p>JAVA 实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * Rearranges the array in ascending order, using the natural order.</div><div class="line"> * <span class="doctag">@param</span> a the array to be sorted</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a)</span> </span>&#123;</div><div class="line">    StdRandom.shuffle(a);</div><div class="line">    sort(a, <span class="number">0</span>, a.length - <span class="number">1</span>);</div><div class="line">    <span class="function"><span class="keyword">assert</span> <span class="title">isSorted</span><span class="params">(a)</span></span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// quicksort the subarray from a[lo] to a[hi]</span></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span> </span>&#123; </div><div class="line">    <span class="keyword">if</span> (hi &lt;= lo) <span class="keyword">return</span>;</div><div class="line">    <span class="keyword">int</span> j = partition(a, lo, hi);</div><div class="line">    sort(a, lo, j-<span class="number">1</span>);</div><div class="line">    sort(a, j+<span class="number">1</span>, hi);</div><div class="line">    <span class="function"><span class="keyword">assert</span> <span class="title">isSorted</span><span class="params">(a, lo, hi)</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><p>切分</p>
<ol>
<li><p>随意取 a[0] 作为切分元素</p>
</li>
<li><p>从数组的左边开始向右扫描直到找到一个大于等于它的元素</p>
</li>
<li><p>再从数组的右边向左扫描直到找到一个小于等于它的元素</p>
</li>
<li><p>交换它们的位置。</p>
</li>
<li><p>如此继续</p>
<p>…</p>
</li>
<li><p>我们只需要将切分元素 a[0] 和左子数组最右侧的元素a[j] 交换，然后返回 j 即可。</p>
</li>
</ol>
</li>
<li><p>随机快速排序：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// partition the subarray a[lo..hi] so that a[lo..j-1] &lt;= a[j] &lt;= a[j+1..hi]</span></div><div class="line"><span class="comment">// and return the index j.</span></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">partition</span><span class="params">(Comparable[] a, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> i = lo;</div><div class="line">    <span class="keyword">int</span> j = hi + <span class="number">1</span>;</div><div class="line">    Comparable v = a[lo];</div><div class="line">    <span class="keyword">while</span> (<span class="keyword">true</span>) &#123; </div><div class="line">  </div><div class="line">        <span class="comment">// find item on lo to swap</span></div><div class="line">        <span class="keyword">while</span> (less(a[++i], v)) &#123;</div><div class="line">            <span class="keyword">if</span> (i == hi) <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">  </div><div class="line">        <span class="comment">// find item on hi to swap</span></div><div class="line">        <span class="keyword">while</span> (less(v, a[--j])) &#123;</div><div class="line">            <span class="keyword">if</span> (j == lo) <span class="keyword">break</span>;      <span class="comment">// redundant since a[lo] acts as sentinel</span></div><div class="line">        &#125;</div><div class="line">  </div><div class="line">        <span class="comment">// check if pointers cross</span></div><div class="line">        <span class="keyword">if</span> (i &gt;= j) <span class="keyword">break</span>;</div><div class="line">  </div><div class="line">        exch(a, i, j);</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="comment">// put partitioning item v at a[j]</span></div><div class="line">    exch(a, lo, j);</div><div class="line">  </div><div class="line">    <span class="comment">// now, a[lo .. j-1] &lt;= a[j] &lt;= a[j+1 .. hi]</span></div><div class="line">    <span class="keyword">return</span> j;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>切分代码实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 对arr[l...r]部分进行partition操作</span></div><div class="line"><span class="comment">// 返回p, 使得arr[l...p-1] &lt; arr[p] ; arr[p+1...r] &gt; arr[p]</span></div><div class="line"><span class="comment">//下面这个写法针对于：j 表示大于 V 的元素的索引，i 表示小于 V 元素的索引，当i 小于 V 时，将 j++，并将交换swap(arr[j], arr[i])元素。</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">partition</span><span class="params">(T arr[], <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</div><div class="line">    T v = arr[l];</div><div class="line">    <span class="comment">//分界点</span></div><div class="line">    <span class="keyword">int</span> j = l;</div><div class="line">    <span class="comment">// i 是当前访问的元素</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = l + <span class="number">1</span>; i &lt;= r; i++) &#123;</div><div class="line">        <span class="keyword">if</span> (arr[i] &lt; v) &#123;</div><div class="line">            swap(arr[j+<span class="number">1</span>], arr[i]);</div><div class="line">            j++;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//最后切换 V 与 arr[j] 的位置，将 V 放在中间位置，左边是小于它的元素，右边是大于它的元素</span></div><div class="line">    swap(arr[l], arr[j]);</div><div class="line">    <span class="keyword">return</span> j;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>当数据较少时切换到插入排序</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// cutoff to insertion sort, must be &gt;= 1</span></div><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> INSERTION_SORT_CUTOFF = <span class="number">8</span>; </div><div class="line"><span class="comment">// quicksort the subarray from a[lo] to a[hi]</span></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span> </span>&#123; </div><div class="line">    <span class="keyword">if</span> (hi &lt;= lo) <span class="keyword">return</span>;</div><div class="line"></div><div class="line">    <span class="comment">// cutoff to insertion sort (Insertion.sort() uses half-open intervals)</span></div><div class="line">    <span class="keyword">int</span> n = hi - lo + <span class="number">1</span>;</div><div class="line">    <span class="keyword">if</span> (n &lt;= INSERTION_SORT_CUTOFF) &#123;</div><div class="line">        Insertion.sort(a, lo, hi + <span class="number">1</span>);</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">int</span> j = partition(a, lo, hi);</div><div class="line">    sort(a, lo, j-<span class="number">1</span>);</div><div class="line">    sort(a, j+<span class="number">1</span>, hi);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>双路快速排序</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">partition</span><span class="params">(T arr, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</div><div class="line">    T v = arr[l];</div><div class="line">    <span class="comment">// arr[l + 1 ... i] &lt;= v; arr[j...r] &gt;= v;</span></div><div class="line">    <span class="keyword">int</span> i = l + <span class="number">1</span>, j = r;</div><div class="line">    <span class="keyword">while</span>(<span class="keyword">true</span>) &#123;</div><div class="line">        <span class="keyword">while</span>(i &lt;= r &amp;&amp; arr[i] &lt; v) i++;</div><div class="line">        <span class="keyword">while</span>(j &gt;= l + <span class="number">1</span> &amp;&amp; arr[j] &gt; v) j--;</div><div class="line">        <span class="keyword">if</span> (i &gt; j) <span class="keyword">break</span>;</div><div class="line">        swap(arr[i], arr[j]);</div><div class="line">        i++;</div><div class="line">        j--;</div><div class="line">    &#125;</div><div class="line">    swap(arr[l], arr[j]);</div><div class="line">    <span class="keyword">return</span> j;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>三路快速排序算法： 适用处理大量重复元素</p>
<ul>
<li><p>第一种方式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// quicksort the subarray a[lo .. hi] using 3-way partitioning</span></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span> </span>&#123; </div><div class="line">    <span class="keyword">if</span> (hi &lt;= lo) <span class="keyword">return</span>;</div><div class="line">    <span class="keyword">int</span> lt = lo, gt = hi;</div><div class="line">    Comparable v = a[lo];</div><div class="line">    <span class="keyword">int</span> i = lo + <span class="number">1</span>;</div><div class="line">    <span class="keyword">while</span> (i &lt;= gt) &#123;</div><div class="line">        <span class="keyword">int</span> cmp = a[i].compareTo(v);</div><div class="line">        <span class="keyword">if</span>      (cmp &lt; <span class="number">0</span>) exch(a, lt++, i++);</div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>) exch(a, i, gt--);</div><div class="line">        <span class="keyword">else</span>              i++;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">// a[lo..lt-1] &lt; v = a[lt..gt] &lt; a[gt+1..hi]. </span></div><div class="line">    sort(a, lo, lt-<span class="number">1</span>);</div><div class="line">    sort(a, gt+<span class="number">1</span>, hi);</div><div class="line">    <span class="function"><span class="keyword">assert</span> <span class="title">isSorted</span><span class="params">(a, lo, hi)</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>第二种方式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">quickSort3Way</span><span class="params">(T arr[], <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span>&#123;</div><div class="line">    T v = arr[l];</div><div class="line">    <span class="keyword">int</span> lt = l;<span class="comment">// arr[l+1 ...lt]  &lt; v</span></div><div class="line">    <span class="keyword">int</span> gt = r + <span class="number">1</span>; <span class="comment">// arr[gt ...r] &gt; v</span></div><div class="line">    <span class="keyword">int</span> i = l + <span class="number">1</span>; <span class="comment">// arr[lt+1 ... i] == v</span></div><div class="line">    <span class="keyword">while</span>(i &lt; gt) &#123;</div><div class="line">        <span class="keyword">if</span> (arr[i] &lt; v) &#123;</div><div class="line">            swap(arr[i], arr[lt+<span class="number">1</span>]);</div><div class="line">            lt++;</div><div class="line">            i++;</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (arr[i] &gt; v) &#123;</div><div class="line">            swap(arr[i], arr[gt - <span class="number">1</span>]);</div><div class="line">            gt--;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            i++;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    swap(arr[l], arr[lt]);</div><div class="line">    </div><div class="line">    quickSort3Way(arr, l, lt - <span class="number">1</span>);</div><div class="line">    quickSort3Way(arr, gt, r);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>用非递归方式进行快速排序</p>
<p>用 Stack 存储数组的下标</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> sort.algorithm;</div><div class="line"><span class="keyword">import</span> java.util.Stack;</div><div class="line"><span class="comment">//快速排序的非递归实现，利用系统的栈stack</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuickSortNonRecursion</span> </span>&#123;</div><div class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123; </div><div class="line">         QuickSortNonRecursion qsnr = <span class="keyword">new</span> QuickSortNonRecursion(); </div><div class="line">         <span class="keyword">int</span>[] array = &#123;<span class="number">0</span>, <span class="number">2</span>, <span class="number">11</span>, <span class="number">121</span>, <span class="number">18</span>, <span class="number">99</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">101</span>, <span class="number">22</span>, <span class="number">9</span>, <span class="number">100</span>&#125;; </div><div class="line">         qsnr.quicksort(array); </div><div class="line">          <span class="keyword">for</span> (<span class="keyword">int</span> i : array) &#123; </div><div class="line">                System.out.print(i + <span class="string">"  "</span>); </div><div class="line">          &#125; </div><div class="line">        &#125; </div><div class="line">                 </div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">quicksort</span><span class="params">(<span class="keyword">int</span>[] array)</span> </span>&#123; </div><div class="line">            <span class="keyword">if</span> (array == <span class="keyword">null</span> || array.length == <span class="number">1</span>) <span class="keyword">return</span>; </div><div class="line">            <span class="comment">//存放开始与结束索引</span></div><div class="line">            Stack&lt;Integer&gt; s = <span class="keyword">new</span> Stack&lt;Integer&gt;();  </div><div class="line">            <span class="comment">//压栈        </span></div><div class="line">            s.push(<span class="number">0</span>);  </div><div class="line">            s.push(array.length - <span class="number">1</span>);  </div><div class="line">            <span class="comment">//利用循环里实现</span></div><div class="line">            <span class="keyword">while</span> (!s.empty()) &#123;  </div><div class="line">                <span class="keyword">int</span> right = s.pop();  </div><div class="line">                <span class="keyword">int</span> left = s.pop();  </div><div class="line">                <span class="comment">//如果最大索引小于等于左边索引，说明结束了</span></div><div class="line">                <span class="keyword">if</span> (right &lt;= left) <span class="keyword">continue</span>;  </div><div class="line">                         </div><div class="line">                <span class="keyword">int</span> i = partition(array, left, right);  </div><div class="line">                <span class="keyword">if</span> (left &lt; i - <span class="number">1</span>) &#123; </div><div class="line">                    s.push(left); </div><div class="line">                    s.push(i - <span class="number">1</span>); </div><div class="line">                &#125;  </div><div class="line">                <span class="keyword">if</span> (i + <span class="number">1</span> &lt; right) &#123; </div><div class="line">                    s.push(i+<span class="number">1</span>); </div><div class="line">                    s.push(right); </div><div class="line">                &#125; </div><div class="line">            &#125;  </div><div class="line">        &#125; </div><div class="line">        <span class="comment">//找到轴心，进行交换 </span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">partition</span> <span class="params">(<span class="keyword">int</span>[] data, <span class="keyword">int</span> first, <span class="keyword">int</span> end)</span></span></div><div class="line">        &#123; </div><div class="line">            <span class="keyword">int</span> temp;</div><div class="line">            <span class="keyword">int</span> i=first,j=end;</div><div class="line">            <span class="keyword">if</span>(first&lt;end)</div><div class="line">            &#123;</div><div class="line">                temp=data[i];</div><div class="line">                <span class="comment">//当i=j的时候，则说明扫描完成了</span></div><div class="line">                <span class="keyword">while</span>(i&lt;j)</div><div class="line">                &#123;</div><div class="line">                    <span class="comment">//从右边向左边扫描找到一个小于temp的元素</span></div><div class="line">                    <span class="keyword">while</span>(j&gt;i&amp;&amp;data[j]&gt;temp)j--;</div><div class="line">                    <span class="keyword">if</span>(i&lt;j)</div><div class="line">                    &#123;</div><div class="line">                        <span class="comment">//将该元素赋值给temp</span></div><div class="line">                        data[i]=data[j];</div><div class="line">                        <span class="comment">//赋值后就应该将i+1指向下一个序号</span></div><div class="line">                        i++;</div><div class="line">                    &#125;</div><div class="line">                           </div><div class="line">                    <span class="comment">//然后从左边向右边开始扫描，找到一个大于temp的元素</span></div><div class="line">                    <span class="keyword">while</span>(i&lt;j&amp;&amp;temp&gt;data[i])i++;</div><div class="line">                    <span class="keyword">if</span>(i&lt;j)</div><div class="line">                    &#123;</div><div class="line">                        <span class="comment">//将该元素赋值给temp</span></div><div class="line">                        data[j]=data[i];</div><div class="line">                        <span class="comment">//赋值后就应该将j-1指向前一个序号</span></div><div class="line">                        j--;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                <span class="comment">//将轴数据放在i位置中</span></div><div class="line">                data[i]=temp;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">return</span> i;</div><div class="line">        &#125; </div><div class="line">    &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">partition</span><span class="params">(<span class="keyword">int</span>[] a, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> pivot = a[start];</div><div class="line">        <span class="keyword">while</span> (start &lt; end) &#123;</div><div class="line">            <span class="keyword">while</span> (start &lt; end &amp;&amp; a[end] &gt;= pivot)</div><div class="line">                end--;</div><div class="line">            a[start] = a[end];</div><div class="line">            <span class="keyword">while</span> (start &lt; end &amp;&amp; a[start] &lt;= pivot)</div><div class="line">                start++;</div><div class="line">            a[end] = a[start];</div><div class="line">        &#125;</div><div class="line">        a[start] = pivot;</div><div class="line">        <span class="keyword">return</span> start;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>我的理解：快速排序的思想是 选取一个基准元素，一般是第一个元素 arr[0]，从数组的左边开始向右扫描，找到第一个比 基准元素大的元素的索引 <code>i</code>，同时在数组的末尾从右向左扫描找到第一个比数组小的元素索引 <code>j</code>，交换他们的位置，如此重复，最后将基准元素与右侧指针所指向的元素<code>arr[j]</code>交换位置，至此我们就确定了切分元素的在数组的位置。递归处理从起始点到 <code>j - 1</code>的元素,和处理从<code>j + 1</code> 到  <code>len</code> （数组长度）的元素。</p>
<h3 id="Heap-Sort-堆排序"><a href="#Heap-Sort-堆排序" class="headerlink" title="Heap Sort  堆排序"></a>Heap Sort  堆排序</h3><p>二叉堆： 是一组能够用堆有序的完全二叉树排序的元素，并在数组中按照层级存储（不使用数组的第一个元素）。</p>
<p>二叉堆是一颗完全二叉树；用数组存储二叉堆。</p>
<p>最大堆： 堆中某一个节点的值总是不大于其父结点的值；</p>
<h4 id="最大堆"><a href="#最大堆" class="headerlink" title="最大堆"></a>最大堆</h4><ul>
<li><p>上浮：因为子结点变得比父结点大导致堆的有序状态被破坏，那么通过交换它和它的父结点来修复堆。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">swim</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</div><div class="line">    <span class="keyword">while</span> (k &gt; <span class="number">1</span> &amp;&amp; less(k/<span class="number">2</span>, k)) &#123;</div><div class="line">        exch(k, k/<span class="number">2</span>);</div><div class="line">        k = k/<span class="number">2</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>下沉：将它与它的两个子结点中的较大者交换来恢复堆的有序状态；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">sink</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</div><div class="line">    <span class="keyword">while</span> (<span class="number">2</span>*k &lt;= n) &#123;</div><div class="line">        <span class="keyword">int</span> j = <span class="number">2</span>*k;</div><div class="line">        <span class="keyword">if</span> (j &lt; n &amp;&amp; less(j, j+<span class="number">1</span>)) j++;</div><div class="line">        <span class="keyword">if</span> (!less(k, j)) <span class="keyword">break</span>;</div><div class="line">        exch(k, j);</div><div class="line">        k = j;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>基于堆的优先队列</p>
<p>JAVA 实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MaxPQ</span>&lt;<span class="title">Key</span>&gt; <span class="keyword">implements</span> <span class="title">Iterable</span>&lt;<span class="title">Key</span>&gt; </span>&#123;</div><div class="line">    <span class="keyword">private</span> Key[] pq;                    <span class="comment">// store items at indices 1 to n</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> n;                       <span class="comment">// number of items on priority queue</span></div><div class="line">    <span class="keyword">private</span> Comparator&lt;Key&gt; comparator;  <span class="comment">// optional comparator</span></div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Initializes an empty priority queue with the given initial capacity.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span>  initCapacity the initial capacity of this priority queue</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MaxPQ</span><span class="params">(<span class="keyword">int</span> initCapacity)</span> </span>&#123;</div><div class="line">        pq = (Key[]) <span class="keyword">new</span> Object[initCapacity + <span class="number">1</span>];</div><div class="line">        n = <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Initializes an empty priority queue.</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MaxPQ</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>(<span class="number">1</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Initializes an empty priority queue with the given initial capacity,</div><div class="line">     * using the given comparator.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span>  initCapacity the initial capacity of this priority queue</div><div class="line">     * <span class="doctag">@param</span>  comparator the order in which to compare the keys</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MaxPQ</span><span class="params">(<span class="keyword">int</span> initCapacity, Comparator&lt;Key&gt; comparator)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.comparator = comparator;</div><div class="line">        pq = (Key[]) <span class="keyword">new</span> Object[initCapacity + <span class="number">1</span>];</div><div class="line">        n = <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Initializes an empty priority queue using the given comparator.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span>  comparator the order in which to compare the keys</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MaxPQ</span><span class="params">(Comparator&lt;Key&gt; comparator)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>(<span class="number">1</span>, comparator);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Initializes a priority queue from the array of keys.</div><div class="line">     * Takes time proportional to the number of keys, using sink-based heap construction.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span>  keys the array of keys</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MaxPQ</span><span class="params">(Key[] keys)</span> </span>&#123;</div><div class="line">        n = keys.length;</div><div class="line">        pq = (Key[]) <span class="keyword">new</span> Object[keys.length + <span class="number">1</span>];</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</div><div class="line">            pq[i+<span class="number">1</span>] = keys[i];</div><div class="line">        <span class="comment">//构造堆</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> k = n/<span class="number">2</span>; k &gt;= <span class="number">1</span>; k--)</div><div class="line">            sink(k);</div><div class="line">        <span class="function"><span class="keyword">assert</span> <span class="title">isMaxHeap</span><span class="params">()</span></span>;</div><div class="line">    &#125;</div><div class="line">      </div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Returns true if this priority queue is empty.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@return</span> &#123;<span class="doctag">@code</span> true&#125; if this priority queue is empty;</div><div class="line">     *         &#123;<span class="doctag">@code</span> false&#125; otherwise</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> n == <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Returns the number of keys on this priority queue.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@return</span> the number of keys on this priority queue</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> n;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Returns a largest key on this priority queue.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@return</span> a largest key on this priority queue</div><div class="line">     * <span class="doctag">@throws</span> NoSuchElementException if this priority queue is empty</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> Key <span class="title">max</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (isEmpty()) <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException(<span class="string">"Priority queue underflow"</span>);</div><div class="line">        <span class="keyword">return</span> pq[<span class="number">1</span>];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// helper function to double the size of the heap array</span></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">resize</span><span class="params">(<span class="keyword">int</span> capacity)</span> </span>&#123;</div><div class="line">        <span class="keyword">assert</span> capacity &gt; n;</div><div class="line">        Key[] temp = (Key[]) <span class="keyword">new</span> Object[capacity];</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</div><div class="line">            temp[i] = pq[i];</div><div class="line">        &#125;</div><div class="line">        pq = temp;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Adds a new key to this priority queue.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span>  x the new key to add to this priority queue</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(Key x)</span> </span>&#123;</div><div class="line"></div><div class="line">        <span class="comment">// double size of array if necessary</span></div><div class="line">        <span class="keyword">if</span> (n == pq.length - <span class="number">1</span>) resize(<span class="number">2</span> * pq.length);</div><div class="line"></div><div class="line">        <span class="comment">// add x, and percolate it up to maintain heap invariant</span></div><div class="line">        pq[++n] = x;</div><div class="line">        swim(n);</div><div class="line">        <span class="function"><span class="keyword">assert</span> <span class="title">isMaxHeap</span><span class="params">()</span></span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Removes and returns a largest key on this priority queue.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@return</span> a largest key on this priority queue</div><div class="line">     * <span class="doctag">@throws</span> NoSuchElementException if this priority queue is empty</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> Key <span class="title">delMax</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (isEmpty()) <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException(<span class="string">"Priority queue underflow"</span>);</div><div class="line">        Key max = pq[<span class="number">1</span>];</div><div class="line">        exch(<span class="number">1</span>, n--);</div><div class="line">        sink(<span class="number">1</span>);</div><div class="line">        pq[n+<span class="number">1</span>] = <span class="keyword">null</span>;     <span class="comment">// to avoid loiterig and help with garbage collection</span></div><div class="line">        <span class="keyword">if</span> ((n &gt; <span class="number">0</span>) &amp;&amp; (n == (pq.length - <span class="number">1</span>) / <span class="number">4</span>)) resize(pq.length / <span class="number">2</span>);</div><div class="line">        <span class="function"><span class="keyword">assert</span> <span class="title">isMaxHeap</span><span class="params">()</span></span>;</div><div class="line">        <span class="keyword">return</span> max;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">   <span class="comment">/***************************************************************************</span></div><div class="line">    * Helper functions to restore the heap invariant.</div><div class="line">    ***************************************************************************/</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">swim</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</div><div class="line">        <span class="keyword">while</span> (k &gt; <span class="number">1</span> &amp;&amp; less(k/<span class="number">2</span>, k)) &#123;</div><div class="line">            exch(k, k/<span class="number">2</span>);</div><div class="line">            k = k/<span class="number">2</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">sink</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</div><div class="line">        <span class="keyword">while</span> (<span class="number">2</span>*k &lt;= n) &#123;</div><div class="line">            <span class="keyword">int</span> j = <span class="number">2</span>*k;</div><div class="line">            <span class="keyword">if</span> (j &lt; n &amp;&amp; less(j, j+<span class="number">1</span>)) j++;</div><div class="line">            <span class="keyword">if</span> (!less(k, j)) <span class="keyword">break</span>;</div><div class="line">            exch(k, j);</div><div class="line">            k = j;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">   <span class="comment">/***************************************************************************</span></div><div class="line">    * Helper functions for compares and swaps.</div><div class="line">    ***************************************************************************/</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">less</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (comparator == <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">return</span> ((Comparable&lt;Key&gt;) pq[i]).compareTo(pq[j]) &lt; <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">return</span> comparator.compare(pq[i], pq[j]) &lt; <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">exch</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</div><div class="line">        Key swap = pq[i];</div><div class="line">        pq[i] = pq[j];</div><div class="line">        pq[j] = swap;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// is pq[1..N] a max heap?</span></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isMaxHeap</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> isMaxHeap(<span class="number">1</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// is subtree of pq[1..n] rooted at k a max heap?</span></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isMaxHeap</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (k &gt; n) <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">        <span class="keyword">int</span> left = <span class="number">2</span>*k;</div><div class="line">        <span class="keyword">int</span> right = <span class="number">2</span>*k + <span class="number">1</span>;</div><div class="line">        <span class="keyword">if</span> (left  &lt;= n &amp;&amp; less(k, left))  <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        <span class="keyword">if</span> (right &lt;= n &amp;&amp; less(k, right)) <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        <span class="keyword">return</span> isMaxHeap(left) &amp;&amp; isMaxHeap(right);</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">   <span class="comment">/***************************************************************************</span></div><div class="line">    * Iterator.</div><div class="line">    ***************************************************************************/</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Returns an iterator that iterates over the keys on this priority queue</div><div class="line">     * in descending order.</div><div class="line">     * The iterator doesn't implement &#123;<span class="doctag">@code</span> remove()&#125; since it's optional.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@return</span> an iterator that iterates over the keys in descending order</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> Iterator&lt;Key&gt; <span class="title">iterator</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> HeapIterator();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">HeapIterator</span> <span class="keyword">implements</span> <span class="title">Iterator</span>&lt;<span class="title">Key</span>&gt; </span>&#123;</div><div class="line"></div><div class="line">        <span class="comment">// create a new pq</span></div><div class="line">        <span class="keyword">private</span> MaxPQ&lt;Key&gt; copy;</div><div class="line"></div><div class="line">        <span class="comment">// add all items to copy of heap</span></div><div class="line">        <span class="comment">// takes linear time since already in heap order so no keys move</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="title">HeapIterator</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">if</span> (comparator == <span class="keyword">null</span>) copy = <span class="keyword">new</span> MaxPQ&lt;Key&gt;(size());</div><div class="line">            <span class="keyword">else</span>                    copy = <span class="keyword">new</span> MaxPQ&lt;Key&gt;(size(), comparator);</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</div><div class="line">                copy.insert(pq[i]);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span>  </span>&#123; <span class="keyword">return</span> !copy.isEmpty();                     &#125;</div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span>      </span>&#123; <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException();  &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> Key <span class="title">next</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">if</span> (!hasNext()) <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException();</div><div class="line">            <span class="keyword">return</span> copy.delMax();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Unit tests the &#123;<span class="doctag">@code</span> MaxPQ&#125; data type.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> args the command-line arguments</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        MaxPQ&lt;String&gt; pq = <span class="keyword">new</span> MaxPQ&lt;String&gt;();</div><div class="line">        <span class="keyword">while</span> (!StdIn.isEmpty()) &#123;</div><div class="line">            String item = StdIn.readString();</div><div class="line">            <span class="keyword">if</span> (!item.equals(<span class="string">"-"</span>)) pq.insert(item);</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (!pq.isEmpty()) StdOut.print(pq.delMax() + <span class="string">" "</span>);</div><div class="line">        &#125;</div><div class="line">        StdOut.println(<span class="string">"("</span> + pq.size() + <span class="string">" left on pq)"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="堆排序"><a href="#堆排序" class="headerlink" title="堆排序"></a>堆排序</h4><ol>
<li><p>堆的构造阶段，从第一个不是<strong>叶子结点</strong>的位置开始下沉操作。</p>
<p>聪明的做法：从右至左构造用 <code>sink()</code> 函数构造子堆，将数组中的每个位置都看成是一个子堆的根结点，那么在该结点上调用 <code>sink()</code> 可以将它们变成一个堆，这个过程会递归地建立起堆的秩序，开始时我们只需要扫描数组中的一半元素，因为我们可以跳过大小为1的子堆，最后在位置为1 上调用 <code>sink()</code> 方法，扫描结束。</p>
</li>
<li><p>下沉排序阶段 ， 从 堆中按递减顺序取出所有元素并得到排序结果；</p>
<p>本质是将堆中的最大元素删除，然后放入堆缩小后数组中空出的位置。</p>
</li>
</ol>
<ul>
<li><p>堆的构造</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">MaxPQ</span><span class="params">(Key[] keys)</span> </span>&#123;</div><div class="line">    n = keys.length;</div><div class="line">    pq = (Key[]) <span class="keyword">new</span> Object[keys.length + <span class="number">1</span>];</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</div><div class="line">        pq[i+<span class="number">1</span>] = keys[i];</div><div class="line">    <span class="comment">//构造堆</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k = n/<span class="number">2</span>; k &gt;= <span class="number">1</span>; k--)</div><div class="line">        sink(k);</div><div class="line">    <span class="function"><span class="keyword">assert</span> <span class="title">isMaxHeap</span><span class="params">()</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>堆的下沉排序</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] pq)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> n = pq.length;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k = n/<span class="number">2</span>; k &gt;= <span class="number">1</span>; k--)</div><div class="line">        sink(pq, k, n);</div><div class="line">    <span class="comment">//下沉</span></div><div class="line">    <span class="keyword">while</span> (n &gt; <span class="number">1</span>) &#123;</div><div class="line">        exch(pq, <span class="number">1</span>, n--);</div><div class="line">        sink(pq, <span class="number">1</span>, n);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>堆的实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Heap</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">// This class should not be instantiated.</span></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Heap</span><span class="params">()</span> </span>&#123; &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Rearranges the array in ascending order, using the natural order.</div><div class="line">     * <span class="doctag">@param</span> pq the array to be sorted</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] pq)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> n = pq.length;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> k = n/<span class="number">2</span>; k &gt;= <span class="number">1</span>; k--)</div><div class="line">            sink(pq, k, n);</div><div class="line">        <span class="keyword">while</span> (n &gt; <span class="number">1</span>) &#123;</div><div class="line">            exch(pq, <span class="number">1</span>, n--);</div><div class="line">            sink(pq, <span class="number">1</span>, n);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">   <span class="comment">/***************************************************************************</span></div><div class="line">    * Helper functions to restore the heap invariant.</div><div class="line">    ***************************************************************************/</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sink</span><span class="params">(Comparable[] pq, <span class="keyword">int</span> k, <span class="keyword">int</span> n)</span> </span>&#123;</div><div class="line">        <span class="keyword">while</span> (<span class="number">2</span>*k &lt;= n) &#123;</div><div class="line">            <span class="keyword">int</span> j = <span class="number">2</span>*k;</div><div class="line">            <span class="keyword">if</span> (j &lt; n &amp;&amp; less(pq, j, j+<span class="number">1</span>)) j++;</div><div class="line">            <span class="keyword">if</span> (!less(pq, k, j)) <span class="keyword">break</span>;</div><div class="line">            exch(pq, k, j);</div><div class="line">            k = j;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">   <span class="comment">/***************************************************************************</span></div><div class="line">    * Helper functions for comparisons and swaps.</div><div class="line">    * Indices are "off-by-one" to support 1-based indexing.</div><div class="line">    ***************************************************************************/</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">less</span><span class="params">(Comparable[] pq, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> pq[i-<span class="number">1</span>].compareTo(pq[j-<span class="number">1</span>]) &lt; <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">exch</span><span class="params">(Object[] pq, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</div><div class="line">        Object swap = pq[i-<span class="number">1</span>];</div><div class="line">        pq[i-<span class="number">1</span>] = pq[j-<span class="number">1</span>];</div><div class="line">        pq[j-<span class="number">1</span>] = swap;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// print array to standard output</span></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">(Comparable[] a)</span> </span>&#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; a.length; i++) &#123;</div><div class="line">            StdOut.println(a[i]);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Reads in a sequence of strings from standard input; heapsorts them; </div><div class="line">     * and prints them to standard output in ascending order. </div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> args the command-line arguments</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        String[] a = StdIn.readAllStrings();</div><div class="line">        Heap.sort(a);</div><div class="line">        show(a);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="最小堆"><a href="#最小堆" class="headerlink" title="最小堆"></a>最小堆</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MinPQ</span>&lt;<span class="title">Key</span>&gt; <span class="keyword">implements</span> <span class="title">Iterable</span>&lt;<span class="title">Key</span>&gt; </span>&#123;</div><div class="line">    <span class="keyword">private</span> Key[] pq;                    <span class="comment">// store items at indices 1 to n</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> n;                       <span class="comment">// number of items on priority queue</span></div><div class="line">    <span class="keyword">private</span> Comparator&lt;Key&gt; comparator;  <span class="comment">// optional comparator</span></div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Initializes an empty priority queue with the given initial capacity.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span>  initCapacity the initial capacity of this priority queue</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MinPQ</span><span class="params">(<span class="keyword">int</span> initCapacity)</span> </span>&#123;</div><div class="line">        pq = (Key[]) <span class="keyword">new</span> Object[initCapacity + <span class="number">1</span>];</div><div class="line">        n = <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Initializes an empty priority queue.</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MinPQ</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>(<span class="number">1</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Initializes an empty priority queue with the given initial capacity,</div><div class="line">     * using the given comparator.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span>  initCapacity the initial capacity of this priority queue</div><div class="line">     * <span class="doctag">@param</span>  comparator the order in which to compare the keys</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MinPQ</span><span class="params">(<span class="keyword">int</span> initCapacity, Comparator&lt;Key&gt; comparator)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.comparator = comparator;</div><div class="line">        pq = (Key[]) <span class="keyword">new</span> Object[initCapacity + <span class="number">1</span>];</div><div class="line">        n = <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Initializes an empty priority queue using the given comparator.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span>  comparator the order in which to compare the keys</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MinPQ</span><span class="params">(Comparator&lt;Key&gt; comparator)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>(<span class="number">1</span>, comparator);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Initializes a priority queue from the array of keys.</div><div class="line">     * &lt;p&gt;</div><div class="line">     * Takes time proportional to the number of keys, using sink-based heap construction.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span>  keys the array of keys</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MinPQ</span><span class="params">(Key[] keys)</span> </span>&#123;</div><div class="line">        n = keys.length;</div><div class="line">        pq = (Key[]) <span class="keyword">new</span> Object[keys.length + <span class="number">1</span>];</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</div><div class="line">            pq[i+<span class="number">1</span>] = keys[i];</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> k = n/<span class="number">2</span>; k &gt;= <span class="number">1</span>; k--)</div><div class="line">            sink(k);</div><div class="line">        <span class="function"><span class="keyword">assert</span> <span class="title">isMinHeap</span><span class="params">()</span></span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Returns true if this priority queue is empty.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@return</span> &#123;<span class="doctag">@code</span> true&#125; if this priority queue is empty;</div><div class="line">     *         &#123;<span class="doctag">@code</span> false&#125; otherwise</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> n == <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Returns the number of keys on this priority queue.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@return</span> the number of keys on this priority queue</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> n;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Returns a smallest key on this priority queue.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@return</span> a smallest key on this priority queue</div><div class="line">     * <span class="doctag">@throws</span> NoSuchElementException if this priority queue is empty</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> Key <span class="title">min</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (isEmpty()) <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException(<span class="string">"Priority queue underflow"</span>);</div><div class="line">        <span class="keyword">return</span> pq[<span class="number">1</span>];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// helper function to double the size of the heap array</span></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">resize</span><span class="params">(<span class="keyword">int</span> capacity)</span> </span>&#123;</div><div class="line">        <span class="keyword">assert</span> capacity &gt; n;</div><div class="line">        Key[] temp = (Key[]) <span class="keyword">new</span> Object[capacity];</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</div><div class="line">            temp[i] = pq[i];</div><div class="line">        &#125;</div><div class="line">        pq = temp;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Adds a new key to this priority queue.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span>  x the key to add to this priority queue</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(Key x)</span> </span>&#123;</div><div class="line">        <span class="comment">// double size of array if necessary</span></div><div class="line">        <span class="keyword">if</span> (n == pq.length - <span class="number">1</span>) resize(<span class="number">2</span> * pq.length);</div><div class="line"></div><div class="line">        <span class="comment">// add x, and percolate it up to maintain heap invariant</span></div><div class="line">        pq[++n] = x;</div><div class="line">        swim(n);</div><div class="line">        <span class="function"><span class="keyword">assert</span> <span class="title">isMinHeap</span><span class="params">()</span></span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Removes and returns a smallest key on this priority queue.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@return</span> a smallest key on this priority queue</div><div class="line">     * <span class="doctag">@throws</span> NoSuchElementException if this priority queue is empty</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> Key <span class="title">delMin</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (isEmpty()) <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException(<span class="string">"Priority queue underflow"</span>);</div><div class="line">        Key min = pq[<span class="number">1</span>];</div><div class="line">        exch(<span class="number">1</span>, n--);</div><div class="line">        sink(<span class="number">1</span>);</div><div class="line">        pq[n+<span class="number">1</span>] = <span class="keyword">null</span>;     <span class="comment">// to avoid loiterig and help with garbage collection</span></div><div class="line">        <span class="keyword">if</span> ((n &gt; <span class="number">0</span>) &amp;&amp; (n == (pq.length - <span class="number">1</span>) / <span class="number">4</span>)) resize(pq.length / <span class="number">2</span>);</div><div class="line">        <span class="function"><span class="keyword">assert</span> <span class="title">isMinHeap</span><span class="params">()</span></span>;</div><div class="line">        <span class="keyword">return</span> min;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">   <span class="comment">/***************************************************************************</span></div><div class="line">    * Helper functions to restore the heap invariant.</div><div class="line">    ***************************************************************************/</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">swim</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</div><div class="line">        <span class="keyword">while</span> (k &gt; <span class="number">1</span> &amp;&amp; greater(k/<span class="number">2</span>, k)) &#123;</div><div class="line">            exch(k, k/<span class="number">2</span>);</div><div class="line">            k = k/<span class="number">2</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">sink</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</div><div class="line">        <span class="keyword">while</span> (<span class="number">2</span>*k &lt;= n) &#123;</div><div class="line">            <span class="keyword">int</span> j = <span class="number">2</span>*k;</div><div class="line">            <span class="keyword">if</span> (j &lt; n &amp;&amp; greater(j, j+<span class="number">1</span>)) j++;</div><div class="line">            <span class="keyword">if</span> (!greater(k, j)) <span class="keyword">break</span>;</div><div class="line">            exch(k, j);</div><div class="line">            k = j;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">   <span class="comment">/***************************************************************************</span></div><div class="line">    * Helper functions for compares and swaps.</div><div class="line">    ***************************************************************************/</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">greater</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (comparator == <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">return</span> ((Comparable&lt;Key&gt;) pq[i]).compareTo(pq[j]) &gt; <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">return</span> comparator.compare(pq[i], pq[j]) &gt; <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">exch</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</div><div class="line">        Key swap = pq[i];</div><div class="line">        pq[i] = pq[j];</div><div class="line">        pq[j] = swap;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// is pq[1..N] a min heap?</span></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isMinHeap</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> isMinHeap(<span class="number">1</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// is subtree of pq[1..n] rooted at k a min heap?</span></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isMinHeap</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (k &gt; n) <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">        <span class="keyword">int</span> left = <span class="number">2</span>*k;</div><div class="line">        <span class="keyword">int</span> right = <span class="number">2</span>*k + <span class="number">1</span>;</div><div class="line">        <span class="keyword">if</span> (left  &lt;= n &amp;&amp; greater(k, left))  <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        <span class="keyword">if</span> (right &lt;= n &amp;&amp; greater(k, right)) <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        <span class="keyword">return</span> isMinHeap(left) &amp;&amp; isMinHeap(right);</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Returns an iterator that iterates over the keys on this priority queue</div><div class="line">     * in ascending order.</div><div class="line">     * &lt;p&gt;</div><div class="line">     * The iterator doesn't implement &#123;<span class="doctag">@code</span> remove()&#125; since it's optional.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@return</span> an iterator that iterates over the keys in ascending order</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> Iterator&lt;Key&gt; <span class="title">iterator</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> HeapIterator();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">HeapIterator</span> <span class="keyword">implements</span> <span class="title">Iterator</span>&lt;<span class="title">Key</span>&gt; </span>&#123;</div><div class="line">        <span class="comment">// create a new pq</span></div><div class="line">        <span class="keyword">private</span> MinPQ&lt;Key&gt; copy;</div><div class="line"></div><div class="line">        <span class="comment">// add all items to copy of heap</span></div><div class="line">        <span class="comment">// takes linear time since already in heap order so no keys move</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="title">HeapIterator</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">if</span> (comparator == <span class="keyword">null</span>) copy = <span class="keyword">new</span> MinPQ&lt;Key&gt;(size());</div><div class="line">            <span class="keyword">else</span>                    copy = <span class="keyword">new</span> MinPQ&lt;Key&gt;(size(), comparator);</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</div><div class="line">                copy.insert(pq[i]);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span>  </span>&#123; <span class="keyword">return</span> !copy.isEmpty();                     &#125;</div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span>      </span>&#123; <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException();  &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> Key <span class="title">next</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">if</span> (!hasNext()) <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException();</div><div class="line">            <span class="keyword">return</span> copy.delMin();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Unit tests the &#123;<span class="doctag">@code</span> MinPQ&#125; data type.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> args the command-line arguments</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        MinPQ&lt;String&gt; pq = <span class="keyword">new</span> MinPQ&lt;String&gt;();</div><div class="line">        <span class="keyword">while</span> (!StdIn.isEmpty()) &#123;</div><div class="line">            String item = StdIn.readString();</div><div class="line">            <span class="keyword">if</span> (!item.equals(<span class="string">"-"</span>)) pq.insert(item);</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (!pq.isEmpty()) StdOut.print(pq.delMin() + <span class="string">" "</span>);</div><div class="line">        &#125;</div><div class="line">        StdOut.println(<span class="string">"("</span> + pq.size() + <span class="string">" left on pq)"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="索引堆"><a href="#索引堆" class="headerlink" title="索引堆"></a>索引堆</h4><h5 id="最大索引堆"><a href="#最大索引堆" class="headerlink" title="最大索引堆"></a>最大索引堆</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IndexMaxPQ</span>&lt;<span class="title">Key</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">Key</span>&gt;&gt; <span class="keyword">implements</span> <span class="title">Iterable</span>&lt;<span class="title">Integer</span>&gt; </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> n;           <span class="comment">// number of elements on PQ</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] pq;        <span class="comment">// binary heap using 1-based indexing</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] qp;        <span class="comment">// inverse of pq - qp[pq[i]] = pq[qp[i]] = i</span></div><div class="line">    <span class="keyword">private</span> Key[] keys;      <span class="comment">// keys[i] = priority of i</span></div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Initializes an empty indexed priority queue with indices between &#123;<span class="doctag">@code</span> 0&#125;</div><div class="line">     * and &#123;<span class="doctag">@code</span> maxN - 1&#125;.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span>  maxN the keys on this priority queue are index from &#123;<span class="doctag">@code</span> 0&#125; to &#123;<span class="doctag">@code</span> maxN - 1&#125;</div><div class="line">     * <span class="doctag">@throws</span> IllegalArgumentException if &#123;<span class="doctag">@code</span> maxN &lt; 0&#125;</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">IndexMaxPQ</span><span class="params">(<span class="keyword">int</span> maxN)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (maxN &lt; <span class="number">0</span>) <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException();</div><div class="line">        n = <span class="number">0</span>;</div><div class="line">        keys = (Key[]) <span class="keyword">new</span> Comparable[maxN + <span class="number">1</span>];    <span class="comment">// make this of length maxN??</span></div><div class="line">        pq   = <span class="keyword">new</span> <span class="keyword">int</span>[maxN + <span class="number">1</span>];</div><div class="line">        qp   = <span class="keyword">new</span> <span class="keyword">int</span>[maxN + <span class="number">1</span>];                   <span class="comment">// make this of length maxN??</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= maxN; i++)</div><div class="line">            qp[i] = -<span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Returns true if this priority queue is empty.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@return</span> &#123;<span class="doctag">@code</span> true&#125; if this priority queue is empty;</div><div class="line">     *         &#123;<span class="doctag">@code</span> false&#125; otherwise</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> n == <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Is &#123;<span class="doctag">@code</span> i&#125; an index on this priority queue?</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span>  i an index</div><div class="line">     * <span class="doctag">@return</span> &#123;<span class="doctag">@code</span> true&#125; if &#123;<span class="doctag">@code</span> i&#125; is an index on this priority queue;</div><div class="line">     *         &#123;<span class="doctag">@code</span> false&#125; otherwise</div><div class="line">     * <span class="doctag">@throws</span> IllegalArgumentException unless &#123;<span class="doctag">@code</span> 0 &lt;= i &lt; maxN&#125;</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> qp[i] != -<span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Returns the number of keys on this priority queue.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@return</span> the number of keys on this priority queue </div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> n;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">   <span class="comment">/**</span></div><div class="line">     * Associate key with index i.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span>  i an index</div><div class="line">     * <span class="doctag">@param</span>  key the key to associate with index &#123;<span class="doctag">@code</span> i&#125;</div><div class="line">     * <span class="doctag">@throws</span> IllegalArgumentException unless &#123;<span class="doctag">@code</span> 0 &lt;= i &lt; maxN&#125;</div><div class="line">     * <span class="doctag">@throws</span> IllegalArgumentException if there already is an item</div><div class="line">     *         associated with index &#123;<span class="doctag">@code</span> i&#125;</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> i, Key key)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (contains(i)) <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"index is already in the priority queue"</span>);</div><div class="line">        n++;</div><div class="line">        qp[i] = n;</div><div class="line">        pq[n] = i;</div><div class="line">        keys[i] = key;</div><div class="line">        swim(n);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Returns an index associated with a maximum key.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@return</span> an index associated with a maximum key</div><div class="line">     * <span class="doctag">@throws</span> NoSuchElementException if this priority queue is empty</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxIndex</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (n == <span class="number">0</span>) <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException(<span class="string">"Priority queue underflow"</span>);</div><div class="line">        <span class="keyword">return</span> pq[<span class="number">1</span>];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Returns a maximum key.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@return</span> a maximum key</div><div class="line">     * <span class="doctag">@throws</span> NoSuchElementException if this priority queue is empty</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> Key <span class="title">maxKey</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (n == <span class="number">0</span>) <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException(<span class="string">"Priority queue underflow"</span>);</div><div class="line">        <span class="keyword">return</span> keys[pq[<span class="number">1</span>]];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Removes a maximum key and returns its associated index.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@return</span> an index associated with a maximum key</div><div class="line">     * <span class="doctag">@throws</span> NoSuchElementException if this priority queue is empty</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">delMax</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (n == <span class="number">0</span>) <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException(<span class="string">"Priority queue underflow"</span>);</div><div class="line">        <span class="keyword">int</span> min = pq[<span class="number">1</span>];</div><div class="line">        exch(<span class="number">1</span>, n--);</div><div class="line">        sink(<span class="number">1</span>);</div><div class="line"></div><div class="line">        <span class="keyword">assert</span> pq[n+<span class="number">1</span>] == min;</div><div class="line">        qp[min] = -<span class="number">1</span>;        <span class="comment">// delete</span></div><div class="line">        keys[min] = <span class="keyword">null</span>;    <span class="comment">// to help with garbage collection</span></div><div class="line">        pq[n+<span class="number">1</span>] = -<span class="number">1</span>;        <span class="comment">// not needed</span></div><div class="line">        <span class="keyword">return</span> min;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Returns the key associated with index &#123;<span class="doctag">@code</span> i&#125;.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span>  i the index of the key to return</div><div class="line">     * <span class="doctag">@return</span> the key associated with index &#123;<span class="doctag">@code</span> i&#125;</div><div class="line">     * <span class="doctag">@throws</span> IllegalArgumentException unless &#123;<span class="doctag">@code</span> 0 &lt;= i &lt; maxN&#125;</div><div class="line">     * <span class="doctag">@throws</span> NoSuchElementException no key is associated with index &#123;<span class="doctag">@code</span> i&#125;</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> Key <span class="title">keyOf</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (!contains(i)) <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException(<span class="string">"index is not in the priority queue"</span>);</div><div class="line">        <span class="keyword">else</span> <span class="keyword">return</span> keys[i];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Change the key associated with index &#123;<span class="doctag">@code</span> i&#125; to the specified value.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span>  i the index of the key to change</div><div class="line">     * <span class="doctag">@param</span>  key change the key associated with index &#123;<span class="doctag">@code</span> i&#125; to this key</div><div class="line">     * <span class="doctag">@throws</span> IllegalArgumentException unless &#123;<span class="doctag">@code</span> 0 &lt;= i &lt; maxN&#125;</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">changeKey</span><span class="params">(<span class="keyword">int</span> i, Key key)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (!contains(i)) <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException(<span class="string">"index is not in the priority queue"</span>);</div><div class="line">        keys[i] = key;</div><div class="line">        swim(qp[i]);</div><div class="line">        sink(qp[i]);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">   <span class="comment">/**</span></div><div class="line">     * Change the key associated with index &#123;<span class="doctag">@code</span> i&#125; to the specified value.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span>  i the index of the key to change</div><div class="line">     * <span class="doctag">@param</span>  key change the key associated with index &#123;<span class="doctag">@code</span> i&#125; to this key</div><div class="line">     * <span class="doctag">@throws</span> IllegalArgumentException unless &#123;<span class="doctag">@code</span> 0 &lt;= i &lt; maxN&#125;</div><div class="line">     * <span class="doctag">@deprecated</span> Replaced by &#123;<span class="doctag">@code</span> changeKey(int, Key)&#125;.</div><div class="line">     */</div><div class="line">    <span class="meta">@Deprecated</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">change</span><span class="params">(<span class="keyword">int</span> i, Key key)</span> </span>&#123;</div><div class="line">        changeKey(i, key);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Increase the key associated with index &#123;<span class="doctag">@code</span> i&#125; to the specified value.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span>  i the index of the key to increase</div><div class="line">     * <span class="doctag">@param</span>  key increase the key associated with index &#123;<span class="doctag">@code</span> i&#125; to this key</div><div class="line">     * <span class="doctag">@throws</span> IllegalArgumentException unless &#123;<span class="doctag">@code</span> 0 &lt;= i &lt; maxN&#125;</div><div class="line">     * <span class="doctag">@throws</span> IllegalArgumentException if &#123;<span class="doctag">@code</span> key &lt;= keyOf(i)&#125;</div><div class="line">     * <span class="doctag">@throws</span> NoSuchElementException no key is associated with index &#123;<span class="doctag">@code</span> i&#125;</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">increaseKey</span><span class="params">(<span class="keyword">int</span> i, Key key)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (!contains(i)) <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException(<span class="string">"index is not in the priority queue"</span>);</div><div class="line">        <span class="keyword">if</span> (keys[i].compareTo(key) &gt;= <span class="number">0</span>)</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Calling increaseKey() with given argument would not strictly increase the key"</span>);</div><div class="line"></div><div class="line">        keys[i] = key;</div><div class="line">        swim(qp[i]);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Decrease the key associated with index &#123;<span class="doctag">@code</span> i&#125; to the specified value.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span>  i the index of the key to decrease</div><div class="line">     * <span class="doctag">@param</span>  key decrease the key associated with index &#123;<span class="doctag">@code</span> i&#125; to this key</div><div class="line">     * <span class="doctag">@throws</span> IllegalArgumentException unless &#123;<span class="doctag">@code</span> 0 &lt;= i &lt; maxN&#125;</div><div class="line">     * <span class="doctag">@throws</span> IllegalArgumentException if &#123;<span class="doctag">@code</span> key &gt;= keyOf(i)&#125;</div><div class="line">     * <span class="doctag">@throws</span> NoSuchElementException no key is associated with index &#123;<span class="doctag">@code</span> i&#125;</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">decreaseKey</span><span class="params">(<span class="keyword">int</span> i, Key key)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (!contains(i)) <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException(<span class="string">"index is not in the priority queue"</span>);</div><div class="line">        <span class="keyword">if</span> (keys[i].compareTo(key) &lt;= <span class="number">0</span>)</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Calling decreaseKey() with given argument would not strictly decrease the key"</span>);</div><div class="line"></div><div class="line">        keys[i] = key;</div><div class="line">        sink(qp[i]);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Remove the key on the priority queue associated with index &#123;<span class="doctag">@code</span> i&#125;.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span>  i the index of the key to remove</div><div class="line">     * <span class="doctag">@throws</span> IllegalArgumentException unless &#123;<span class="doctag">@code</span> 0 &lt;= i &lt; maxN&#125;</div><div class="line">     * <span class="doctag">@throws</span> NoSuchElementException no key is associated with index &#123;<span class="doctag">@code</span> i&#125;</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (!contains(i)) <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException(<span class="string">"index is not in the priority queue"</span>);</div><div class="line">        <span class="keyword">int</span> index = qp[i];</div><div class="line">        exch(index, n--);</div><div class="line">        swim(index);</div><div class="line">        sink(index);</div><div class="line">        keys[i] = <span class="keyword">null</span>;</div><div class="line">        qp[i] = -<span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">   <span class="comment">/***************************************************************************</span></div><div class="line">    * General helper functions.</div><div class="line">    ***************************************************************************/</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">less</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> keys[pq[i]].compareTo(keys[pq[j]]) &lt; <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">exch</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> swap = pq[i];</div><div class="line">        pq[i] = pq[j];</div><div class="line">        pq[j] = swap;</div><div class="line">        qp[pq[i]] = i;</div><div class="line">        qp[pq[j]] = j;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">   <span class="comment">/***************************************************************************</span></div><div class="line">    * Heap helper functions.</div><div class="line">    ***************************************************************************/</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">swim</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</div><div class="line">        <span class="keyword">while</span> (k &gt; <span class="number">1</span> &amp;&amp; less(k/<span class="number">2</span>, k)) &#123;</div><div class="line">            exch(k, k/<span class="number">2</span>);</div><div class="line">            k = k/<span class="number">2</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">sink</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</div><div class="line">        <span class="keyword">while</span> (<span class="number">2</span>*k &lt;= n) &#123;</div><div class="line">            <span class="keyword">int</span> j = <span class="number">2</span>*k;</div><div class="line">            <span class="keyword">if</span> (j &lt; n &amp;&amp; less(j, j+<span class="number">1</span>)) j++;</div><div class="line">            <span class="keyword">if</span> (!less(k, j)) <span class="keyword">break</span>;</div><div class="line">            exch(k, j);</div><div class="line">            k = j;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Returns an iterator that iterates over the keys on the</div><div class="line">     * priority queue in descending order.</div><div class="line">     * The iterator doesn't implement &#123;<span class="doctag">@code</span> remove()&#125; since it's optional.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@return</span> an iterator that iterates over the keys in descending order</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> Iterator&lt;Integer&gt; <span class="title">iterator</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> HeapIterator();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">HeapIterator</span> <span class="keyword">implements</span> <span class="title">Iterator</span>&lt;<span class="title">Integer</span>&gt; </span>&#123;</div><div class="line">        <span class="comment">// create a new pq</span></div><div class="line">        <span class="keyword">private</span> IndexMaxPQ&lt;Key&gt; copy;</div><div class="line"></div><div class="line">        <span class="comment">// add all elements to copy of heap</span></div><div class="line">        <span class="comment">// takes linear time since already in heap order so no keys move</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="title">HeapIterator</span><span class="params">()</span> </span>&#123;</div><div class="line">            copy = <span class="keyword">new</span> IndexMaxPQ&lt;Key&gt;(pq.length - <span class="number">1</span>);</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</div><div class="line">                copy.insert(pq[i], keys[pq[i]]);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span>  </span>&#123; <span class="keyword">return</span> !copy.isEmpty();                     &#125;</div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span>      </span>&#123; <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException();  &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> Integer <span class="title">next</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">if</span> (!hasNext()) <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException();</div><div class="line">            <span class="keyword">return</span> copy.delMax();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Unit tests the &#123;<span class="doctag">@code</span> IndexMaxPQ&#125; data type.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> args the command-line arguments</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        <span class="comment">// insert a bunch of strings</span></div><div class="line">        String[] strings = &#123; <span class="string">"it"</span>, <span class="string">"was"</span>, <span class="string">"the"</span>, <span class="string">"best"</span>, <span class="string">"of"</span>, <span class="string">"times"</span>, <span class="string">"it"</span>, <span class="string">"was"</span>, <span class="string">"the"</span>, <span class="string">"worst"</span> &#125;;</div><div class="line"></div><div class="line">        IndexMaxPQ&lt;String&gt; pq = <span class="keyword">new</span> IndexMaxPQ&lt;String&gt;(strings.length);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; strings.length; i++) &#123;</div><div class="line">            pq.insert(i, strings[i]);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// print each key using the iterator</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i : pq) &#123;</div><div class="line">            StdOut.println(i + <span class="string">" "</span> + strings[i]);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        StdOut.println();</div><div class="line"></div><div class="line">        <span class="comment">// increase or decrease the key</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; strings.length; i++) &#123;</div><div class="line">            <span class="keyword">if</span> (StdRandom.uniform() &lt; <span class="number">0.5</span>)</div><div class="line">                pq.increaseKey(i, strings[i] + strings[i]);</div><div class="line">            <span class="keyword">else</span></div><div class="line">                pq.decreaseKey(i, strings[i].substring(<span class="number">0</span>, <span class="number">1</span>));</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// delete and print each key</span></div><div class="line">        <span class="keyword">while</span> (!pq.isEmpty()) &#123;</div><div class="line">            String key = pq.maxKey();</div><div class="line">            <span class="keyword">int</span> i = pq.delMax();</div><div class="line">            StdOut.println(i + <span class="string">" "</span> + key);</div><div class="line">        &#125;</div><div class="line">        StdOut.println();</div><div class="line"></div><div class="line">        <span class="comment">// reinsert the same strings</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; strings.length; i++) &#123;</div><div class="line">            pq.insert(i, strings[i]);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// delete them in random order</span></div><div class="line">        <span class="keyword">int</span>[] perm = <span class="keyword">new</span> <span class="keyword">int</span>[strings.length];</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; strings.length; i++)</div><div class="line">            perm[i] = i;</div><div class="line">        StdRandom.shuffle(perm);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; perm.length; i++) &#123;</div><div class="line">            String key = pq.keyOf(perm[i]);</div><div class="line">            pq.delete(perm[i]);</div><div class="line">            StdOut.println(perm[i] + <span class="string">" "</span> + key);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="最小索引堆"><a href="#最小索引堆" class="headerlink" title="最小索引堆"></a>最小索引堆</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IndexMinPQ</span>&lt;<span class="title">Key</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">Key</span>&gt;&gt; <span class="keyword">implements</span> <span class="title">Iterable</span>&lt;<span class="title">Integer</span>&gt; </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> maxN;        <span class="comment">// maximum number of elements on PQ</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> n;           <span class="comment">// number of elements on PQ</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] pq;        <span class="comment">// binary heap using 1-based indexing</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] qp;        <span class="comment">// inverse of pq - qp[pq[i]] = pq[qp[i]] = i</span></div><div class="line">    <span class="keyword">private</span> Key[] keys;      <span class="comment">// keys[i] = priority of i</span></div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Initializes an empty indexed priority queue with indices between &#123;<span class="doctag">@code</span> 0&#125;</div><div class="line">     * and &#123;<span class="doctag">@code</span> maxN - 1&#125;.</div><div class="line">     * <span class="doctag">@param</span>  maxN the keys on this priority queue are index from &#123;<span class="doctag">@code</span> 0&#125;</div><div class="line">     *         &#123;<span class="doctag">@code</span> maxN - 1&#125;</div><div class="line">     * <span class="doctag">@throws</span> IllegalArgumentException if &#123;<span class="doctag">@code</span> maxN &lt; 0&#125;</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">IndexMinPQ</span><span class="params">(<span class="keyword">int</span> maxN)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (maxN &lt; <span class="number">0</span>) <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException();</div><div class="line">        <span class="keyword">this</span>.maxN = maxN;</div><div class="line">        n = <span class="number">0</span>;</div><div class="line">        keys = (Key[]) <span class="keyword">new</span> Comparable[maxN + <span class="number">1</span>];    <span class="comment">// make this of length maxN??</span></div><div class="line">        pq   = <span class="keyword">new</span> <span class="keyword">int</span>[maxN + <span class="number">1</span>];</div><div class="line">        qp   = <span class="keyword">new</span> <span class="keyword">int</span>[maxN + <span class="number">1</span>];                   <span class="comment">// make this of length maxN??</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= maxN; i++)</div><div class="line">            qp[i] = -<span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Returns true if this priority queue is empty.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@return</span> &#123;<span class="doctag">@code</span> true&#125; if this priority queue is empty;</div><div class="line">     *         &#123;<span class="doctag">@code</span> false&#125; otherwise</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> n == <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Is &#123;<span class="doctag">@code</span> i&#125; an index on this priority queue?</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span>  i an index</div><div class="line">     * <span class="doctag">@return</span> &#123;<span class="doctag">@code</span> true&#125; if &#123;<span class="doctag">@code</span> i&#125; is an index on this priority queue;</div><div class="line">     *         &#123;<span class="doctag">@code</span> false&#125; otherwise</div><div class="line">     * <span class="doctag">@throws</span> IllegalArgumentException unless &#123;<span class="doctag">@code</span> 0 &lt;= i &lt; maxN&#125;</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (i &lt; <span class="number">0</span> || i &gt;= maxN) <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException();</div><div class="line">        <span class="keyword">return</span> qp[i] != -<span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Returns the number of keys on this priority queue.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@return</span> the number of keys on this priority queue</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> n;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Associates key with index &#123;<span class="doctag">@code</span> i&#125;.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span>  i an index</div><div class="line">     * <span class="doctag">@param</span>  key the key to associate with index &#123;<span class="doctag">@code</span> i&#125;</div><div class="line">     * <span class="doctag">@throws</span> IllegalArgumentException unless &#123;<span class="doctag">@code</span> 0 &lt;= i &lt; maxN&#125;</div><div class="line">     * <span class="doctag">@throws</span> IllegalArgumentException if there already is an item associated</div><div class="line">     *         with index &#123;<span class="doctag">@code</span> i&#125;</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> i, Key key)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (i &lt; <span class="number">0</span> || i &gt;= maxN) <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException();</div><div class="line">        <span class="keyword">if</span> (contains(i)) <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"index is already in the priority queue"</span>);</div><div class="line">        n++;</div><div class="line">        qp[i] = n;</div><div class="line">        pq[n] = i;</div><div class="line">        keys[i] = key;</div><div class="line">        swim(n);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Returns an index associated with a minimum key.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@return</span> an index associated with a minimum key</div><div class="line">     * <span class="doctag">@throws</span> NoSuchElementException if this priority queue is empty</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minIndex</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (n == <span class="number">0</span>) <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException(<span class="string">"Priority queue underflow"</span>);</div><div class="line">        <span class="keyword">return</span> pq[<span class="number">1</span>];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Returns a minimum key.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@return</span> a minimum key</div><div class="line">     * <span class="doctag">@throws</span> NoSuchElementException if this priority queue is empty</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> Key <span class="title">minKey</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (n == <span class="number">0</span>) <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException(<span class="string">"Priority queue underflow"</span>);</div><div class="line">        <span class="keyword">return</span> keys[pq[<span class="number">1</span>]];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Removes a minimum key and returns its associated index.</div><div class="line">     * <span class="doctag">@return</span> an index associated with a minimum key</div><div class="line">     * <span class="doctag">@throws</span> NoSuchElementException if this priority queue is empty</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">delMin</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (n == <span class="number">0</span>) <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException(<span class="string">"Priority queue underflow"</span>);</div><div class="line">        <span class="keyword">int</span> min = pq[<span class="number">1</span>];</div><div class="line">        exch(<span class="number">1</span>, n--);</div><div class="line">        sink(<span class="number">1</span>);</div><div class="line">        <span class="keyword">assert</span> min == pq[n+<span class="number">1</span>];</div><div class="line">        qp[min] = -<span class="number">1</span>;        <span class="comment">// delete</span></div><div class="line">        keys[min] = <span class="keyword">null</span>;    <span class="comment">// to help with garbage collection</span></div><div class="line">        pq[n+<span class="number">1</span>] = -<span class="number">1</span>;        <span class="comment">// not needed</span></div><div class="line">        <span class="keyword">return</span> min;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Returns the key associated with index &#123;<span class="doctag">@code</span> i&#125;.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span>  i the index of the key to return</div><div class="line">     * <span class="doctag">@return</span> the key associated with index &#123;<span class="doctag">@code</span> i&#125;</div><div class="line">     * <span class="doctag">@throws</span> IllegalArgumentException unless &#123;<span class="doctag">@code</span> 0 &lt;= i &lt; maxN&#125;</div><div class="line">     * <span class="doctag">@throws</span> NoSuchElementException no key is associated with index &#123;<span class="doctag">@code</span> i&#125;</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> Key <span class="title">keyOf</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (i &lt; <span class="number">0</span> || i &gt;= maxN) <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException();</div><div class="line">        <span class="keyword">if</span> (!contains(i)) <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException(<span class="string">"index is not in the priority queue"</span>);</div><div class="line">        <span class="keyword">else</span> <span class="keyword">return</span> keys[i];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Change the key associated with index &#123;<span class="doctag">@code</span> i&#125; to the specified value.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span>  i the index of the key to change</div><div class="line">     * <span class="doctag">@param</span>  key change the key associated with index &#123;<span class="doctag">@code</span> i&#125; to this key</div><div class="line">     * <span class="doctag">@throws</span> IllegalArgumentException unless &#123;<span class="doctag">@code</span> 0 &lt;= i &lt; maxN&#125;</div><div class="line">     * <span class="doctag">@throws</span> NoSuchElementException no key is associated with index &#123;<span class="doctag">@code</span> i&#125;</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">changeKey</span><span class="params">(<span class="keyword">int</span> i, Key key)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (i &lt; <span class="number">0</span> || i &gt;= maxN) <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException();</div><div class="line">        <span class="keyword">if</span> (!contains(i)) <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException(<span class="string">"index is not in the priority queue"</span>);</div><div class="line">        keys[i] = key;</div><div class="line">        swim(qp[i]);</div><div class="line">        sink(qp[i]);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Change the key associated with index &#123;<span class="doctag">@code</span> i&#125; to the specified value.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span>  i the index of the key to change</div><div class="line">     * <span class="doctag">@param</span>  key change the key associated with index &#123;<span class="doctag">@code</span> i&#125; to this key</div><div class="line">     * <span class="doctag">@throws</span> IllegalArgumentException unless &#123;<span class="doctag">@code</span> 0 &lt;= i &lt; maxN&#125;</div><div class="line">     * <span class="doctag">@deprecated</span> Replaced by &#123;<span class="doctag">@code</span> changeKey(int, Key)&#125;.</div><div class="line">     */</div><div class="line">    <span class="meta">@Deprecated</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">change</span><span class="params">(<span class="keyword">int</span> i, Key key)</span> </span>&#123;</div><div class="line">        changeKey(i, key);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Decrease the key associated with index &#123;<span class="doctag">@code</span> i&#125; to the specified value.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span>  i the index of the key to decrease</div><div class="line">     * <span class="doctag">@param</span>  key decrease the key associated with index &#123;<span class="doctag">@code</span> i&#125; to this key</div><div class="line">     * <span class="doctag">@throws</span> IllegalArgumentException unless &#123;<span class="doctag">@code</span> 0 &lt;= i &lt; maxN&#125;</div><div class="line">     * <span class="doctag">@throws</span> IllegalArgumentException if &#123;<span class="doctag">@code</span> key &gt;= keyOf(i)&#125;</div><div class="line">     * <span class="doctag">@throws</span> NoSuchElementException no key is associated with index &#123;<span class="doctag">@code</span> i&#125;</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">decreaseKey</span><span class="params">(<span class="keyword">int</span> i, Key key)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (i &lt; <span class="number">0</span> || i &gt;= maxN) <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException();</div><div class="line">        <span class="keyword">if</span> (!contains(i)) <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException(<span class="string">"index is not in the priority queue"</span>);</div><div class="line">        <span class="keyword">if</span> (keys[i].compareTo(key) &lt;= <span class="number">0</span>)</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Calling decreaseKey() with given argument would not strictly decrease the key"</span>);</div><div class="line">        keys[i] = key;</div><div class="line">        swim(qp[i]);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Increase the key associated with index &#123;<span class="doctag">@code</span> i&#125; to the specified value.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span>  i the index of the key to increase</div><div class="line">     * <span class="doctag">@param</span>  key increase the key associated with index &#123;<span class="doctag">@code</span> i&#125; to this key</div><div class="line">     * <span class="doctag">@throws</span> IllegalArgumentException unless &#123;<span class="doctag">@code</span> 0 &lt;= i &lt; maxN&#125;</div><div class="line">     * <span class="doctag">@throws</span> IllegalArgumentException if &#123;<span class="doctag">@code</span> key &lt;= keyOf(i)&#125;</div><div class="line">     * <span class="doctag">@throws</span> NoSuchElementException no key is associated with index &#123;<span class="doctag">@code</span> i&#125;</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">increaseKey</span><span class="params">(<span class="keyword">int</span> i, Key key)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (i &lt; <span class="number">0</span> || i &gt;= maxN) <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException();</div><div class="line">        <span class="keyword">if</span> (!contains(i)) <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException(<span class="string">"index is not in the priority queue"</span>);</div><div class="line">        <span class="keyword">if</span> (keys[i].compareTo(key) &gt;= <span class="number">0</span>)</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Calling increaseKey() with given argument would not strictly increase the key"</span>);</div><div class="line">        keys[i] = key;</div><div class="line">        sink(qp[i]);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Remove the key associated with index &#123;<span class="doctag">@code</span> i&#125;.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span>  i the index of the key to remove</div><div class="line">     * <span class="doctag">@throws</span> IllegalArgumentException unless &#123;<span class="doctag">@code</span> 0 &lt;= i &lt; maxN&#125;</div><div class="line">     * <span class="doctag">@throws</span> NoSuchElementException no key is associated with index &#123;<span class="doctag">@code</span> i&#125;</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (i &lt; <span class="number">0</span> || i &gt;= maxN) <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException();</div><div class="line">        <span class="keyword">if</span> (!contains(i)) <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException(<span class="string">"index is not in the priority queue"</span>);</div><div class="line">        <span class="keyword">int</span> index = qp[i];</div><div class="line">        exch(index, n--);</div><div class="line">        swim(index);</div><div class="line">        sink(index);</div><div class="line">        keys[i] = <span class="keyword">null</span>;</div><div class="line">        qp[i] = -<span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">   <span class="comment">/***************************************************************************</span></div><div class="line">    * General helper functions.</div><div class="line">    ***************************************************************************/</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">greater</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> keys[pq[i]].compareTo(keys[pq[j]]) &gt; <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">exch</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> swap = pq[i];</div><div class="line">        pq[i] = pq[j];</div><div class="line">        pq[j] = swap;</div><div class="line">        qp[pq[i]] = i;</div><div class="line">        qp[pq[j]] = j;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">   <span class="comment">/***************************************************************************</span></div><div class="line">    * Heap helper functions.</div><div class="line">    ***************************************************************************/</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">swim</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</div><div class="line">        <span class="keyword">while</span> (k &gt; <span class="number">1</span> &amp;&amp; greater(k/<span class="number">2</span>, k)) &#123;</div><div class="line">            exch(k, k/<span class="number">2</span>);</div><div class="line">            k = k/<span class="number">2</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">sink</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</div><div class="line">        <span class="keyword">while</span> (<span class="number">2</span>*k &lt;= n) &#123;</div><div class="line">            <span class="keyword">int</span> j = <span class="number">2</span>*k;</div><div class="line">            <span class="keyword">if</span> (j &lt; n &amp;&amp; greater(j, j+<span class="number">1</span>)) j++;</div><div class="line">            <span class="keyword">if</span> (!greater(k, j)) <span class="keyword">break</span>;</div><div class="line">            exch(k, j);</div><div class="line">            k = j;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">   <span class="comment">/***************************************************************************</span></div><div class="line">    * Iterators.</div><div class="line">    ***************************************************************************/</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Returns an iterator that iterates over the keys on the</div><div class="line">     * priority queue in ascending order.</div><div class="line">     * The iterator doesn't implement &#123;<span class="doctag">@code</span> remove()&#125; since it's optional.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@return</span> an iterator that iterates over the keys in ascending order</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> Iterator&lt;Integer&gt; <span class="title">iterator</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="keyword">new</span> HeapIterator(); &#125;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">HeapIterator</span> <span class="keyword">implements</span> <span class="title">Iterator</span>&lt;<span class="title">Integer</span>&gt; </span>&#123;</div><div class="line">        <span class="comment">// create a new pq</span></div><div class="line">        <span class="keyword">private</span> IndexMinPQ&lt;Key&gt; copy;</div><div class="line"></div><div class="line">        <span class="comment">// add all elements to copy of heap</span></div><div class="line">        <span class="comment">// takes linear time since already in heap order so no keys move</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="title">HeapIterator</span><span class="params">()</span> </span>&#123;</div><div class="line">            copy = <span class="keyword">new</span> IndexMinPQ&lt;Key&gt;(pq.length - <span class="number">1</span>);</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</div><div class="line">                copy.insert(pq[i], keys[pq[i]]);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span>  </span>&#123; <span class="keyword">return</span> !copy.isEmpty();                     &#125;</div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span>      </span>&#123; <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException();  &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> Integer <span class="title">next</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">if</span> (!hasNext()) <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException();</div><div class="line">            <span class="keyword">return</span> copy.delMin();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Unit tests the &#123;<span class="doctag">@code</span> IndexMinPQ&#125; data type.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> args the command-line arguments</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        <span class="comment">// insert a bunch of strings</span></div><div class="line">        String[] strings = &#123; <span class="string">"it"</span>, <span class="string">"was"</span>, <span class="string">"the"</span>, <span class="string">"best"</span>, <span class="string">"of"</span>, <span class="string">"times"</span>, <span class="string">"it"</span>, <span class="string">"was"</span>, <span class="string">"the"</span>, <span class="string">"worst"</span> &#125;;</div><div class="line"></div><div class="line">        IndexMinPQ&lt;String&gt; pq = <span class="keyword">new</span> IndexMinPQ&lt;String&gt;(strings.length);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; strings.length; i++) &#123;</div><div class="line">            pq.insert(i, strings[i]);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// delete and print each key</span></div><div class="line">        <span class="keyword">while</span> (!pq.isEmpty()) &#123;</div><div class="line">            <span class="keyword">int</span> i = pq.delMin();</div><div class="line">            StdOut.println(i + <span class="string">" "</span> + strings[i]);</div><div class="line">        &#125;</div><div class="line">        StdOut.println();</div><div class="line"></div><div class="line">        <span class="comment">// reinsert the same strings</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; strings.length; i++) &#123;</div><div class="line">            pq.insert(i, strings[i]);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// print each key using the iterator</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i : pq) &#123;</div><div class="line">            StdOut.println(i + <span class="string">" "</span> + strings[i]);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">while</span> (!pq.isEmpty()) &#123;</div><div class="line">            pq.delMin();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="分治算法"><a href="#分治算法" class="headerlink" title="分治算法"></a>分治算法</h3><h4 id="Merge-Sort-amp-Quick-Sort"><a href="#Merge-Sort-amp-Quick-Sort" class="headerlink" title="Merge Sort &amp; Quick Sort"></a>Merge Sort &amp; Quick Sort</h4><h4 id="逆序对"><a href="#逆序对" class="headerlink" title="逆序对"></a>逆序对</h4><h4 id="取数组中第N大的元素"><a href="#取数组中第N大的元素" class="headerlink" title="取数组中第N大的元素"></a>取数组中第N大的元素</h4><p>时间复杂度  O(N)</p>
<h3 id="具体题目"><a href="#具体题目" class="headerlink" title="具体题目"></a>具体题目</h3><p>题目：请实现一个排序算法，要求时间效率为O(n).(允许使用常量大小的辅助空间不得超过O（n）)</p>
<p><img src="http://images2015.cnblogs.com/blog/936002/201604/936002-20160419200543054-1710853388.png" alt="img"></p>
<p>该题来自于剑指offer，用空间来换时间效率</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> cn.stack.queue;  </div><div class="line"><span class="comment">//该方法用长度为100的整数数组作为辅助空间换来了O（N）的时间效率  </span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo3</span> </span>&#123;  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sortAge</span><span class="params">(<span class="keyword">int</span>[] ages)</span> </span>&#123;  </div><div class="line">        <span class="keyword">int</span> length = ages.length;  </div><div class="line">        <span class="keyword">int</span> oldestAge = <span class="number">99</span>;  </div><div class="line">        <span class="comment">// 建立一个数组，用来存储每个年龄员工的数量  </span></div><div class="line">        <span class="keyword">int</span>[] timesOfAge = <span class="keyword">new</span> <span class="keyword">int</span>[oldestAge + <span class="number">1</span>];  </div><div class="line">        <span class="comment">// 初始化  </span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">99</span>; i++) &#123;  </div><div class="line">            timesOfAge[i] = <span class="number">0</span>;  </div><div class="line">        &#125;  </div><div class="line">        <span class="comment">// 循环统计  </span></div><div class="line">        <span class="keyword">int</span> age = <span class="number">0</span>;  </div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;  </div><div class="line">            age = ages[i];  </div><div class="line">            <span class="keyword">if</span> (age &gt; <span class="number">99</span> || age &lt; <span class="number">0</span>) &#123;  </div><div class="line">                System.out.println(<span class="string">"年龄输入有误"</span>);  </div><div class="line">                <span class="keyword">return</span>;  </div><div class="line">            &#125;  </div><div class="line">            timesOfAge[age]++;  </div><div class="line">        &#125;  </div><div class="line">        <span class="comment">//进行排序，结果存储在ages数组中  </span></div><div class="line">        <span class="keyword">int</span> index = <span class="number">0</span>;  </div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= oldestAge; i++) &#123;  </div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; timesOfAge[i]; j++) &#123;  </div><div class="line">                ages[index] = i;  </div><div class="line">                ++index;  </div><div class="line">            &#125;  </div><div class="line">        &#125;  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/06/20/查找算法/" rel="next" title="查找算法">
                <i class="fa fa-chevron-left"></i> 查找算法
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/01/16/Pro-Git-第三章-Git-分支/" rel="prev" title="Pro Git 第三章 Git 分支">
                Pro Git 第三章 Git 分支 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/header.jpg"
               alt="喝咖啡的鱼儿" />
          <p class="site-author-name" itemprop="name">喝咖啡的鱼儿</p>
           
              <p class="site-description motion-element" itemprop="description">愿你走出半生，归来仍是少年</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">31</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">7</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#排序"><span class="nav-number">1.</span> <span class="nav-text">排序</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Bubble-Sort-冒泡排序"><span class="nav-number">1.1.</span> <span class="nav-text">Bubble Sort 冒泡排序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Select-Sort-选择排序"><span class="nav-number">1.2.</span> <span class="nav-text">Select Sort 选择排序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Insert-Sort-插入排序"><span class="nav-number">1.3.</span> <span class="nav-text">Insert Sort 插入排序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Shell-Sort-希尔排序"><span class="nav-number">1.4.</span> <span class="nav-text">Shell Sort 希尔排序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Merge-Sort-归并排序"><span class="nav-number">1.5.</span> <span class="nav-text">Merge Sort  归并排序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Quick-Sort-快速排序"><span class="nav-number">1.6.</span> <span class="nav-text">Quick Sort 快速排序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Heap-Sort-堆排序"><span class="nav-number">1.7.</span> <span class="nav-text">Heap Sort  堆排序</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#最大堆"><span class="nav-number">1.7.1.</span> <span class="nav-text">最大堆</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#堆排序"><span class="nav-number">1.7.2.</span> <span class="nav-text">堆排序</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#最小堆"><span class="nav-number">1.7.3.</span> <span class="nav-text">最小堆</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#索引堆"><span class="nav-number">1.7.4.</span> <span class="nav-text">索引堆</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#最大索引堆"><span class="nav-number">1.7.4.1.</span> <span class="nav-text">最大索引堆</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#最小索引堆"><span class="nav-number">1.7.4.2.</span> <span class="nav-text">最小索引堆</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#分治算法"><span class="nav-number">1.8.</span> <span class="nav-text">分治算法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Merge-Sort-amp-Quick-Sort"><span class="nav-number">1.8.1.</span> <span class="nav-text">Merge Sort & Quick Sort</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#逆序对"><span class="nav-number">1.8.2.</span> <span class="nav-text">逆序对</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#取数组中第N大的元素"><span class="nav-number">1.8.3.</span> <span class="nav-text">取数组中第N大的元素</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#具体题目"><span class="nav-number">1.9.</span> <span class="nav-text">具体题目</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">喝咖啡的鱼儿</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  








  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  




	





  





  





  






  





  

  

  

  

  

</body>
</html>
